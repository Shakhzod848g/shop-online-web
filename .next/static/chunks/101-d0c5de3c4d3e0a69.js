(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{6230:function(e,t,r){"use strict";r.d(t,{Ui:function(){return eq},vQ:function(){return e$}});var i,n=r(2265),o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function s(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})}function c(e,t){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function l(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}"function"==typeof SuppressedError&&SuppressedError,"function"==typeof SuppressedError&&SuppressedError;var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h(e,t){return e(t={exports:{}},t.exports),t.exports}var f=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){var e=this;this.locked=new Map,this.addToLocked=function(t,r){var i=e.locked.get(t);void 0===i?void 0===r?e.locked.set(t,[]):e.locked.set(t,[r]):void 0!==r&&(i.unshift(r),e.locked.set(t,i))},this.isLocked=function(t){return e.locked.has(t)},this.lock=function(t){return new Promise(function(r,i){e.isLocked(t)?e.addToLocked(t,r):(e.addToLocked(t),r())})},this.unlock=function(t){var r=e.locked.get(t);if(void 0===r||0===r.length){e.locked.delete(t);return}var i=r.pop();e.locked.set(t,r),void 0!==i&&setTimeout(i,0)}}return e.getInstance=function(){return void 0===e.instance&&(e.instance=new e),e.instance},e}();t.default=function(){return r.getInstance()}});d(f);var p=d(h(function(e,t){var r=u&&u.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(a,s)}c((i=i.apply(e,t||[])).next())})},i=u&&u.__generator||function(e,t){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var n="browser-tabs-lock-key",o={key:function(e){return r(u,void 0,void 0,function(){return i(this,function(e){throw Error("Unsupported")})})},getItem:function(e){return r(u,void 0,void 0,function(){return i(this,function(e){throw Error("Unsupported")})})},clear:function(){return r(u,void 0,void 0,function(){return i(this,function(e){return[2,window.localStorage.clear()]})})},removeItem:function(e){return r(u,void 0,void 0,function(){return i(this,function(e){throw Error("Unsupported")})})},setItem:function(e,t){return r(u,void 0,void 0,function(){return i(this,function(e){throw Error("Unsupported")})})},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function a(e){return new Promise(function(t){return setTimeout(t,e)})}function s(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="",i=0;i<e;i++){var n=Math.floor(Math.random()*t.length);r+=t[n]}return r}var c=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+s(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,void 0===e.waiters&&(e.waiters=[])}return e.prototype.acquireLock=function(t,c){return void 0===c&&(c=5e3),r(this,void 0,void 0,function(){var r,l,u,d,h,f,p;return i(this,function(i){switch(i.label){case 0:r=Date.now()+s(4),l=Date.now()+c,u=n+"-"+t,d=void 0===this.storageHandler?o:this.storageHandler,i.label=1;case 1:if(!(Date.now()<l))return[3,8];return[4,a(30)];case 2:if(i.sent(),null!==d.getItemSync(u))return[3,5];return h=this.id+"-"+t+"-"+r,[4,a(Math.floor(25*Math.random()))];case 3:return i.sent(),d.setItemSync(u,JSON.stringify({id:this.id,iat:r,timeoutKey:h,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,a(30)];case 4:if(i.sent(),null!==(f=d.getItemSync(u))&&(p=JSON.parse(f)).id===this.id&&p.iat===r)return this.acquiredIatSet.add(r),this.refreshLockWhileAcquired(u,r),[2,!0];return[3,7];case 5:return e.lockCorrector(void 0===this.storageHandler?o:this.storageHandler),[4,this.waitForSomethingToChange(l)];case 6:i.sent(),i.label=7;case 7:return r=Date.now()+s(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(e,t){return r(this,void 0,void 0,function(){var n=this;return i(this,function(a){return setTimeout(function(){return r(n,void 0,void 0,function(){var r,n,a;return i(this,function(i){switch(i.label){case 0:return[4,f.default().lock(t)];case 1:if(i.sent(),!this.acquiredIatSet.has(t)||null===(n=(r=void 0===this.storageHandler?o:this.storageHandler).getItemSync(e)))return f.default().unlock(t),[2];return(a=JSON.parse(n)).timeRefreshed=Date.now(),r.setItemSync(e,JSON.stringify(a)),f.default().unlock(t),this.refreshLockWhileAcquired(e,t),[2]}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return r(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,new Promise(function(r){var i=!1,n=Date.now(),o=!1;function a(){if(o||(window.removeEventListener("storage",a),e.removeFromWaiting(a),clearTimeout(s),o=!0),!i){i=!0;var t=50-(Date.now()-n);t>0?setTimeout(r,t):r(null)}}window.addEventListener("storage",a),e.addToWaiting(a);var s=setTimeout(a,Math.max(0,t-Date.now()))})];case 1:return r.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),void 0!==e.waiters&&e.waiters.push(t)},e.removeFromWaiting=function(t){void 0!==e.waiters&&(e.waiters=e.waiters.filter(function(e){return e!==t}))},e.notifyWaiters=function(){void 0!==e.waiters&&e.waiters.slice().forEach(function(e){return e()})},e.prototype.releaseLock=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.releaseLock__private__(e)];case 1:return[2,t.sent()]}})})},e.prototype.releaseLock__private__=function(t){return r(this,void 0,void 0,function(){var r,a,s,c;return i(this,function(i){switch(i.label){case 0:if(r=void 0===this.storageHandler?o:this.storageHandler,a=n+"-"+t,null===(s=r.getItemSync(a)))return[2];if((c=JSON.parse(s)).id!==this.id)return[3,2];return[4,f.default().lock(c.iat)];case 1:i.sent(),this.acquiredIatSet.delete(c.iat),r.removeItemSync(a),f.default().unlock(c.iat),e.notifyWaiters(),i.label=2;case 2:return[2]}})})},e.lockCorrector=function(t){for(var r=Date.now()-5e3,i=[],o=0;;){var a=t.keySync(o);if(null===a)break;i.push(a),o++}for(var s=!1,c=0;c<i.length;c++){var l=i[c];if(l.includes(n)){var u=t.getItemSync(l);if(null!==u){var d=JSON.parse(u);(void 0===d.timeRefreshed&&d.timeAcquired<r||void 0!==d.timeRefreshed&&d.timeRefreshed<r)&&(t.removeItemSync(l),s=!0)}}}s&&e.notifyWaiters()},e.waiters=void 0,e}();t.default=c}));let m=600,y={timeoutInSeconds:m},g=1e4,v="memory",b={name:"one-client-js",version:"2.1.3"},w=()=>Date.now();class k extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,k.prototype)}static fromPayload({error:e,error_description:t}){return new k(e,t)}}class _ extends k{constructor(e,t,r,i=null){super(e,t),this.state=r,this.appState=i,Object.setPrototypeOf(this,_.prototype)}}class V extends k{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,V.prototype)}}class S extends V{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,S.prototype)}}class I extends k{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,I.prototype)}}class O extends k{constructor(e,t,r){super(e,t),this.mfa_token=r,Object.setPrototypeOf(this,O.prototype)}}class Z extends k{constructor(e,t){super("missing_refresh_token",`Missing Refresh Token (audience: '${x(e,["default"])}', scope: '${x(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,Z.prototype)}}function x(e,t=[]){return e&&!t.includes(e)?e:""}let P=e=>{e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));let t=new URLSearchParams(e);return{state:t.get("state"),code:t.get("code")||void 0,error:t.get("error")||void 0,error_description:t.get("error_description")||void 0}},T=(e,t,r=m)=>new Promise((i,n)=>{let o;let a=window.document.createElement("iframe");a.setAttribute("width","0"),a.setAttribute("height","0"),a.style.display="none";let s=()=>{window.document.body.contains(a)&&(window.document.body.removeChild(a),window.removeEventListener("message",o,!1))},c=setTimeout(()=>{n(new V),s()},1e3*r);o=function(e){if(e.origin!=t||!e.data||"authorization_response"!==e.data.type)return;let r=e.source;r&&r.close(),e.data.response.error?n(k.fromPayload(e.data.response)):i(e.data.response),clearTimeout(c),window.removeEventListener("message",o,!1),setTimeout(s,2e3)},window.addEventListener("message",o,!1),window.document.body.appendChild(a),a.setAttribute("src",e)}),R=e=>{let t=window.screenX+(window.innerWidth-400)/2,r=window.screenY+(window.innerHeight-600)/2;return window.open(e,"eartho:authorize:popup",`left=${t},top=${r},width=400,height=600,resizable,scrollbars=yes,status=1`)},C=e=>new Promise((t,r)=>{let i;let n=setInterval(()=>{e.popup&&e.popup.closed&&(clearInterval(n),clearTimeout(o),window.removeEventListener("message",i,!1),r(new I(e.popup)))},1e3),o=setTimeout(()=>{clearInterval(n),r(new S(e.popup)),window.removeEventListener("message",i,!1)},1e3*(e.timeoutInSeconds||m));i=function(a){if(a.data&&"authorization_response"===a.data.type){if(clearTimeout(o),clearInterval(n),window.removeEventListener("message",i,!1),e.popup.close(),a.data.response.error)return r(k.fromPayload(a.data.response));t(a.data.response)}},window.addEventListener("message",i)}),z=()=>window.crypto,W=()=>{let e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",t="";return Array.from(z().getRandomValues(new Uint8Array(43))).forEach(r=>t+=e[r%e.length]),t},E=e=>btoa(e),N=e=>Object.keys(e).filter(t=>void 0!==e[t]).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{}),U=e=>{var{clientId:t}=e,r=l(e,["clientId"]);return new URLSearchParams(N(Object.assign({client_id:t},r))).toString()},F=async e=>{let t=z().subtle.digest({name:"SHA-256"},(new TextEncoder).encode(e));return await t},j=e=>{let t={"+":"-","/":"_","=":""};return e.replace(/[+/=]/g,e=>t[e])},X=e=>decodeURIComponent(atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),D=e=>X(e.replace(/_/g,"/").replace(/-/g,"+")),L=e=>{let t=new Uint8Array(e);return j(window.btoa(String.fromCharCode(...Array.from(t))))},A=()=>{if(!z())throw Error("For security reasons, `window.crypto` is required to run `one-client-js`.");if(void 0===z().subtle)throw Error(`
      one-client-js must run on a secure origin.
    `)},J=e=>/^https?:\/\//.test(e)?e:`https://${e}`,G=(e,t)=>e?e.startsWith("https://")?e:`https://${e}/`:`${t}/`,Y=e=>"string"!=typeof e?e:parseInt(e,10)||void 0,K=(e,t)=>new Promise(function(r,i){let n=new MessageChannel;n.port1.onmessage=function(e){e.data.error?i(Error(e.data.error)):r(e.data),n.port1.close()},t.postMessage(e,[n.port2])}),H=()=>new AbortController,M=async(e,t)=>{let r=await fetch(e,t);return{ok:r.ok,json:await r.json()}},B=async(e,t,r)=>{let i;let n=H();return t.signal=n.signal,Promise.race([M(e,t),new Promise((e,t)=>{i=setTimeout(()=>{n.abort(),t(Error("Timeout when executing 'fetch'"))},r)})]).finally(()=>{clearTimeout(i)})},$=async(e,t,r,i,n,o,a)=>K({auth:{audience:t,scope:r},timeout:n,fetchUrl:e,fetchOptions:i,useFormData:a},o),q=async(e,t,r,i,n,o,a=g)=>n?$(e,t,r,i,a,n,o):B(e,i,a);async function Q(e,t,r,i,n,o,a){let s,c=null;for(let l=0;l<3;l++)try{s=await q(e,r,i,n,o,a,t),c=null;break}catch(e){c=e}if(c)throw c;let u=s.json,{error:d,error_description:h}=u,f=l(u,["error","error_description"]),{ok:p}=s;if(!p){let t=h||`HTTP error. Unable to fetch ${e}`;if("mfa_required"===d)throw new O(d,t,f.mfa_token);if("missing_refresh_token"===d)throw new Z(r,i);throw new k(d||"request_error",t)}return f}async function ee(e,t){var{baseUrl:r,timeout:i,audience:n,scope:o,earthoOneClient:a,useFormData:s}=e,c=l(e,["baseUrl","timeout","audience","scope","earthoOneClient","useFormData"]);let u=s?U(c):JSON.stringify(c);return await Q(`${r}/access/oauth/token`,i,n||"default",o,{method:"POST",body:u,headers:{"Content-Type":s?"application/x-www-form-urlencoded":"application/json","Eartho-Client":btoa(JSON.stringify(a||b))}},t,s)}let et=e=>Array.from(new Set(e)),er=(...e)=>et(e.filter(Boolean).join(" ").trim().split(/\s+/)).join(" "),ei="@@oneclientjs@@",en="@@user@@";class eo{constructor(e,t=ei,r){this.prefix=t,this.suffix=r,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){let[t,r,i,n]=e.split("::");return new eo({clientId:r,scope:n,audience:i},t)}static fromCacheEntry(e){let{scope:t,audience:r,client_id:i}=e;return new eo({scope:t,audience:r,clientId:i})}}class ea{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){let t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith(ei))}}class es{constructor(){let e;this.enclosedCache=(e={},{set(t,r){e[t]=r},get(t){let r=e[t];if(r)return r},remove(t){delete e[t]},allKeys:()=>Object.keys(e)})}}class ec{constructor(e,t,r){this.cache=e,this.keyManifest=t,this.nowProvider=r||w}async setIdToken(e,t,r){var i;let n=this.getIdTokenCacheKey(e);await this.cache.set(n,{id_token:t,decodedToken:r}),await (null===(i=this.keyManifest)||void 0===i?void 0:i.add(n))}async getIdToken(e){let t=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){let t=await this.get(e);if(!t||!t.id_token||!t.decodedToken)return;return{id_token:t.id_token,decodedToken:t.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}}async get(e,t=0){var r;let i=await this.cache.get(e.toKey());if(!i){let t=await this.getCacheKeys();if(!t)return;let r=this.matchExistingCacheKey(e,t);r&&(i=await this.cache.get(r))}if(!i)return;let n=await this.nowProvider();return i.expiresAt-t<Math.floor(n/1e3)?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},await this.cache.set(e.toKey(),i),i.body):(await this.cache.remove(e.toKey()),void await (null===(r=this.keyManifest)||void 0===r?void 0:r.remove(e.toKey()))):i.body}async set(e){var t;let r=new eo({clientId:e.client_id,scope:e.scope,audience:e.audience}),i=await this.wrapCacheEntry(e);await this.cache.set(r.toKey(),i),await (null===(t=this.keyManifest)||void 0===t?void 0:t.add(r.toKey()))}async clear(e){var t;let r=await this.getCacheKeys();r&&(await r.filter(t=>!e||t.includes(e)).reduce(async(e,t)=>{await e,await this.cache.remove(t)},Promise.resolve()),await (null===(t=this.keyManifest)||void 0===t?void 0:t.clear()))}async wrapCacheEntry(e){let t=Math.floor(await this.nowProvider()/1e3)+e.expires_in;return{body:e,expiresAt:t}}async getCacheKeys(){var e;return this.keyManifest?null===(e=await this.keyManifest.get())||void 0===e?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new eo({clientId:e},ei,en).toKey()}matchExistingCacheKey(e,t){return t.filter(t=>{var r;let i=eo.fromKey(t),n=new Set(i.scope&&i.scope.split(" ")),o=(null===(r=e.scope)||void 0===r?void 0:r.split(" "))||[],a=i.scope&&o.reduce((e,t)=>e&&n.has(t),!0);return i.prefix===ei&&i.clientId===e.clientId&&i.audience===e.audience&&a})[0]}}class el{constructor(e,t,r){this.storage=e,this.clientId=t,this.cookieDomain=r,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}let eu=e=>"number"==typeof e,ed=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],eh=e=>{let t=e.split("."),[r,i,n]=t;if(3!==t.length||!r||!i||!n)throw Error("ID token could not be decoded");let o=JSON.parse(D(i)),a={__raw:e},s={};return Object.keys(o).forEach(e=>{a[e]=o[e],ed.includes(e)||(s[e]=o[e])}),{encoded:{header:r,payload:i,signature:n},header:JSON.parse(D(r)),claims:a,user:s.user}},ef=e=>{if(!e.id_token)throw Error("ID token is required but missing");let t=eh(e.id_token);if(!t.claims.iss)throw Error("Issuer (iss) claim must be a string present in the ID token");if(t.claims.iss!==e.iss)throw Error(`Issuer (iss) claim mismatch in the ID token; expected "${e.iss}", found "${t.claims.iss}"`);if("RS256"!==t.header.alg)throw Error(`Signature algorithm of "${t.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!t.claims.aud||!("string"==typeof t.claims.aud||Array.isArray(t.claims.aud)))throw Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but was not one of "${t.claims.aud.join(", ")}"`);if(t.claims.aud.length>1){if(!t.claims.azp)throw Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(t.claims.azp!==e.aud)throw Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${e.aud}", found "${t.claims.azp}"`)}}else if(t.claims.aud!==e.aud)throw Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but found "${t.claims.aud}"`);if(e.nonce){if(!t.claims.nonce)throw Error("Nonce (nonce) claim must be a string present in the ID token");if(t.claims.nonce!==e.nonce)throw Error(`Nonce (nonce) claim mismatch in the ID token; expected "${e.nonce}", found "${t.claims.nonce}"`)}if(e.max_age&&!eu(t.claims.auth_time))throw Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(null==t.claims.exp||!eu(t.claims.exp))throw Error("Expiration Time (exp) claim must be a number present in the ID token");if(!eu(t.claims.iat))throw Error("Issued At (iat) claim must be a number present in the ID token");let r=e.leeway||60,i=new Date(e.now||Date.now()),n=new Date(0);if(n.setUTCSeconds(t.claims.exp+r),i>n)throw Error(`Expiration Time (exp) claim error in the ID token; current time (${i}) is after expiration time (${n})`);if(null!=t.claims.nbf&&eu(t.claims.nbf)){let e=new Date(0);if(e.setUTCSeconds(t.claims.nbf-r),i<e)throw Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${i}) is before ${e}`)}if(null!=t.claims.auth_time&&eu(t.claims.auth_time)){let n=new Date(0);if(n.setUTCSeconds(parseInt(t.claims.auth_time)+e.max_age+r),i>n)throw Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${i}) is after last auth at ${n}`)}if(e.organization){let r=e.organization.trim();if(r.startsWith("org_")){if(t.claims.org_id){if(r!==t.claims.org_id)throw Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${r}", found "${t.claims.org_id}"`)}else throw Error("Organization ID (org_id) claim must be a string present in the ID token")}else{let e=r.toLowerCase();if(t.claims.org_name){if(e!==t.claims.org_name)throw Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${e}", found "${t.claims.org_name}"`)}else throw Error("Organization Name (org_name) claim must be a string present in the ID token")}}return t};var ep=h(function(e,t){var r=u&&u.__assign||function(){return(r=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function i(e,t){if(!t)return"";var r="; "+e;return!0===t?r:r+"="+t}function n(e,t,r){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(t).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if("number"==typeof e.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*e.expires),e.expires=t}return i("Expires",e.expires?e.expires.toUTCString():"")+i("Domain",e.domain)+i("Path",e.path)+i("Secure",e.secure)+i("SameSite",e.sameSite)}(r)}function o(e){for(var t={},r=e?e.split("; "):[],i=/(%[\dA-F]{2})+/gi,n=0;n<r.length;n++){var o=r[n].split("="),a=o.slice(1).join("=");'"'===a.charAt(0)&&(a=a.slice(1,-1));try{t[o[0].replace(i,decodeURIComponent)]=a.replace(i,decodeURIComponent)}catch(e){}}return t}function a(){return o(document.cookie)}function s(e,t,i){document.cookie=n(e,t,r({path:"/"},i))}t.__esModule=!0,t.encode=n,t.parse=o,t.getAll=a,t.get=function(e){return a()[e]},t.set=s,t.remove=function(e,t){s(e,"",r(r({},t),{expires:-1}))}});d(ep),ep.encode,ep.parse,ep.getAll;var em=ep.get,ey=ep.set,eg=ep.remove;let ev={get(e){let t=em(e);if(void 0!==t)return JSON.parse(t)},save(e,t,r){let i={};"https:"===window.location.protocol&&(i={secure:!0,sameSite:"none"}),(null==r?void 0:r.daysUntilExpire)&&(i.expires=r.daysUntilExpire),(null==r?void 0:r.cookieDomain)&&(i.domain=r.cookieDomain),ey(e,JSON.stringify(t),i)},remove(e,t){let r={};(null==t?void 0:t.cookieDomain)&&(r.domain=t.cookieDomain),eg(e,r)}},eb="_legacy_",ew={get:e=>ev.get(e)||ev.get(`${eb}${e}`),save(e,t,r){let i={};"https:"===window.location.protocol&&(i={secure:!0}),(null==r?void 0:r.daysUntilExpire)&&(i.expires=r.daysUntilExpire),(null==r?void 0:r.cookieDomain)&&(i.domain=r.cookieDomain),ey(`${eb}${e}`,JSON.stringify(t),i),ev.save(e,t,r)},remove(e,t){let r={};(null==t?void 0:t.cookieDomain)&&(r.domain=t.cookieDomain),eg(e,r),ev.remove(e,t),ev.remove(`${eb}${e}`,t)}},ek={get(e){if("undefined"==typeof sessionStorage)return;let t=sessionStorage.getItem(e);if(null!=t)return JSON.parse(t)},save(e,t){sessionStorage.setItem(e,JSON.stringify(t))},remove(e){sessionStorage.removeItem(e)}};var e_=function(e){var t,r,n,o;return i=i||(r=(t=function(e,t){var r=atob(e);if(t){for(var i=new Uint8Array(r.length),n=0,o=r.length;n<o;++n)i[n]=r.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return r}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgR2VuZXJpY0Vycm9yIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZXJyb3IsZXJyb3JfZGVzY3JpcHRpb24pe3N1cGVyKGVycm9yX2Rlc2NyaXB0aW9uKTt0aGlzLmVycm9yPWVycm9yO3RoaXMuZXJyb3JfZGVzY3JpcHRpb249ZXJyb3JfZGVzY3JpcHRpb247T2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsR2VuZXJpY0Vycm9yLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjplcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplcnJvcl9kZXNjcmlwdGlvbn0pe3JldHVybiBuZXcgR2VuZXJpY0Vycm9yKGVycm9yLGVycm9yX2Rlc2NyaXB0aW9uKX19Y2xhc3MgTWlzc2luZ1JlZnJlc2hUb2tlbkVycm9yIGV4dGVuZHMgR2VuZXJpY0Vycm9ye2NvbnN0cnVjdG9yKGF1ZGllbmNlLHNjb3BlKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7dmFsdWVPckVtcHR5U3RyaW5nKGF1ZGllbmNlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7dmFsdWVPckVtcHR5U3RyaW5nKHNjb3BlKX0nKWApO3RoaXMuYXVkaWVuY2U9YXVkaWVuY2U7dGhpcy5zY29wZT1zY29wZTtPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxNaXNzaW5nUmVmcmVzaFRva2VuRXJyb3IucHJvdG90eXBlKX19ZnVuY3Rpb24gdmFsdWVPckVtcHR5U3RyaW5nKHZhbHVlLGV4Y2x1ZGU9W10pe3JldHVybiB2YWx1ZSYmIWV4Y2x1ZGUuaW5jbHVkZXModmFsdWUpP3ZhbHVlOiIifWZ1bmN0aW9uIF9fcmVzdChzLGUpe3ZhciB0PXt9O2Zvcih2YXIgcCBpbiBzKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLHApJiZlLmluZGV4T2YocCk8MCl0W3BdPXNbcF07aWYocyE9bnVsbCYmdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0iZnVuY3Rpb24iKWZvcih2YXIgaT0wLHA9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTtpPHAubGVuZ3RoO2krKyl7aWYoZS5pbmRleE9mKHBbaV0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLHBbaV0pKXRbcFtpXV09c1twW2ldXX1yZXR1cm4gdH10eXBlb2YgU3VwcHJlc3NlZEVycm9yPT09ImZ1bmN0aW9uIj9TdXBwcmVzc2VkRXJyb3I6ZnVuY3Rpb24oZXJyb3Isc3VwcHJlc3NlZCxtZXNzYWdlKXt2YXIgZT1uZXcgRXJyb3IobWVzc2FnZSk7cmV0dXJuIGUubmFtZT0iU3VwcHJlc3NlZEVycm9yIixlLmVycm9yPWVycm9yLGUuc3VwcHJlc3NlZD1zdXBwcmVzc2VkLGV9O2NvbnN0IHN0cmlwVW5kZWZpbmVkPXBhcmFtcz0+T2JqZWN0LmtleXMocGFyYW1zKS5maWx0ZXIoKGs9PnR5cGVvZiBwYXJhbXNba10hPT0idW5kZWZpbmVkIikpLnJlZHVjZSgoKGFjYyxrZXkpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYWNjKSx7W2tleV06cGFyYW1zW2tleV19KSkse30pO2NvbnN0IGNyZWF0ZVF1ZXJ5UGFyYW1zPV9hPT57dmFye2NsaWVudElkOmNsaWVudF9pZH09X2EscGFyYW1zPV9fcmVzdChfYSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKHN0cmlwVW5kZWZpbmVkKE9iamVjdC5hc3NpZ24oe2NsaWVudF9pZDpjbGllbnRfaWR9LHBhcmFtcykpKS50b1N0cmluZygpfTtsZXQgcmVmcmVzaFRva2Vucz17fTtjb25zdCBjYWNoZUtleT0oYXVkaWVuY2Usc2NvcGUpPT5gJHthdWRpZW5jZX18JHtzY29wZX1gO2NvbnN0IGdldFJlZnJlc2hUb2tlbj0oYXVkaWVuY2Usc2NvcGUpPT5yZWZyZXNoVG9rZW5zW2NhY2hlS2V5KGF1ZGllbmNlLHNjb3BlKV07Y29uc3Qgc2V0UmVmcmVzaFRva2VuPShyZWZyZXNoVG9rZW4sYXVkaWVuY2Usc2NvcGUpPT5yZWZyZXNoVG9rZW5zW2NhY2hlS2V5KGF1ZGllbmNlLHNjb3BlKV09cmVmcmVzaFRva2VuO2NvbnN0IGRlbGV0ZVJlZnJlc2hUb2tlbj0oYXVkaWVuY2Usc2NvcGUpPT5kZWxldGUgcmVmcmVzaFRva2Vuc1tjYWNoZUtleShhdWRpZW5jZSxzY29wZSldO2NvbnN0IHdhaXQ9dGltZT0+bmV3IFByb21pc2UoKHJlc29sdmU9PnNldFRpbWVvdXQocmVzb2x2ZSx0aW1lKSkpO2NvbnN0IGZvcm1EYXRhVG9PYmplY3Q9Zm9ybURhdGE9Pntjb25zdCBxdWVyeVBhcmFtcz1uZXcgVVJMU2VhcmNoUGFyYW1zKGZvcm1EYXRhKTtjb25zdCBwYXJzZWRRdWVyeT17fTtxdWVyeVBhcmFtcy5mb3JFYWNoKCgodmFsLGtleSk9PntwYXJzZWRRdWVyeVtrZXldPXZhbH0pKTtyZXR1cm4gcGFyc2VkUXVlcnl9O2NvbnN0IG1lc3NhZ2VIYW5kbGVyPWFzeW5jKHtkYXRhOnt0aW1lb3V0OnRpbWVvdXQsYXV0aDphdXRoLGZldGNoVXJsOmZldGNoVXJsLGZldGNoT3B0aW9uczpmZXRjaE9wdGlvbnMsdXNlRm9ybURhdGE6dXNlRm9ybURhdGF9LHBvcnRzOltwb3J0XX0pPT57bGV0IGpzb247Y29uc3R7YXVkaWVuY2U6YXVkaWVuY2Usc2NvcGU6c2NvcGV9PWF1dGh8fHt9O3RyeXtjb25zdCBib2R5PXVzZUZvcm1EYXRhP2Zvcm1EYXRhVG9PYmplY3QoZmV0Y2hPcHRpb25zLmJvZHkpOkpTT04ucGFyc2UoZmV0Y2hPcHRpb25zLmJvZHkpO2lmKCFib2R5LnJlZnJlc2hfdG9rZW4mJmJvZHkuZ3JhbnRfdHlwZT09PSJyZWZyZXNoX3Rva2VuIil7Y29uc3QgcmVmcmVzaFRva2VuPWdldFJlZnJlc2hUb2tlbihhdWRpZW5jZSxzY29wZSk7aWYoIXJlZnJlc2hUb2tlbil7dGhyb3cgbmV3IE1pc3NpbmdSZWZyZXNoVG9rZW5FcnJvcihhdWRpZW5jZSxzY29wZSl9ZmV0Y2hPcHRpb25zLmJvZHk9dXNlRm9ybURhdGE/Y3JlYXRlUXVlcnlQYXJhbXMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGJvZHkpLHtyZWZyZXNoX3Rva2VuOnJlZnJlc2hUb2tlbn0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYm9keSkse3JlZnJlc2hfdG9rZW46cmVmcmVzaFRva2VufSkpfWxldCBhYm9ydENvbnRyb2xsZXI7aWYodHlwZW9mIEFib3J0Q29udHJvbGxlcj09PSJmdW5jdGlvbiIpe2Fib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyO2ZldGNoT3B0aW9ucy5zaWduYWw9YWJvcnRDb250cm9sbGVyLnNpZ25hbH1sZXQgcmVzcG9uc2U7dHJ5e3Jlc3BvbnNlPWF3YWl0IFByb21pc2UucmFjZShbd2FpdCh0aW1lb3V0KSxmZXRjaChmZXRjaFVybCxPYmplY3QuYXNzaWduKHt9LGZldGNoT3B0aW9ucykpXSl9Y2F0Y2goZXJyb3Ipe3BvcnQucG9zdE1lc3NhZ2Uoe2Vycm9yOmVycm9yLm1lc3NhZ2V9KTtyZXR1cm59aWYoIXJlc3BvbnNlKXtpZihhYm9ydENvbnRyb2xsZXIpYWJvcnRDb250cm9sbGVyLmFib3J0KCk7cG9ydC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtyZXR1cm59anNvbj1hd2FpdCByZXNwb25zZS5qc29uKCk7aWYoanNvbi5yZWZyZXNoX3Rva2VuKXtzZXRSZWZyZXNoVG9rZW4oanNvbi5yZWZyZXNoX3Rva2VuLGF1ZGllbmNlLHNjb3BlKTtkZWxldGUganNvbi5yZWZyZXNoX3Rva2VufWVsc2V7ZGVsZXRlUmVmcmVzaFRva2VuKGF1ZGllbmNlLHNjb3BlKX1wb3J0LnBvc3RNZXNzYWdlKHtvazpyZXNwb25zZS5vayxqc29uOmpzb259KX1jYXRjaChlcnJvcil7cG9ydC5wb3N0TWVzc2FnZSh7b2s6ZmFsc2UsanNvbjp7ZXJyb3I6ZXJyb3IuZXJyb3IsZXJyb3JfZGVzY3JpcHRpb246ZXJyb3IubWVzc2FnZX19KX19O3thZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtZXNzYWdlSGFuZGxlcil9fSkoKTsKCg==",!1)).indexOf("\n",10)+1,n=t.substring(r)+"",o=new Blob([n],{type:"application/javascript"}),URL.createObjectURL(o)),new Worker(i,e)};let eV={},eS=(e,t)=>{let r=eV[t];return r||(r=e().finally(()=>{delete eV[t],r=null}),eV[t]=r),r},eI=async(e,t=3)=>{for(let r=0;r<t;r++)if(await e())return!0;return!1};class eO{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var t;let r=new Set((null===(t=await this.cache.get(this.manifestKey))||void 0===t?void 0:t.keys)||[]);r.add(e),await this.cache.set(this.manifestKey,{keys:[...r]})}async remove(e){let t=await this.cache.get(this.manifestKey);if(t){let r=new Set(t.keys);return(r.delete(e),r.size>0)?await this.cache.set(this.manifestKey,{keys:[...r]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`${ei}::${e}`}}let eZ="eartho.lock.getTokenSilently",ex=e=>`eartho.${e}.organization_hint`,eP="eartho.is.authenticated",eT=e=>`eartho.${e}.is.authenticated`,eR={memory:()=>(new es).enclosedCache,localstorage:()=>new ea},eC=e=>eR[e],ez=(e,t,r,i,n,o,a,s,c)=>Object.assign(Object.assign(Object.assign({client_id:e.clientId},e.authorizationParams),r),{scope:er(t,r.scope),response_type:"code",response_mode:s||"query",state:i,nonce:n,redirect_uri:a||e.authorizationParams.redirect_uri,code_challenge:o,code_challenge_method:"S256",access_id:r.access_id}),eW=e=>{let{openUrl:t,onRedirect:r}=e;return Object.assign(Object.assign({},l(e,["openUrl","onRedirect"])),{openUrl:!1===t||t?t:r})},eE=new p;class eN{constructor(e){var t;let r,i;if(this.userCache=(new es).enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await eE.releaseLock(eZ),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},e.domain="one.eartho.io",e.issuer="https://one.eartho.world/",e.authorizationParams=e.authorizationParams||{},e.authorizationParams.audience=(null===(t=e.authorizationParams)||void 0===t?void 0:t.audience)||e.clientId,e.cacheLocation="localstorage",e.useRefreshTokens=!0,this.domainUrl=J(e.domain),this.authDomainUrl=J("api.eartho.io"),this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),"undefined"!=typeof window&&A(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the EarthoOne configuration; ignoring `cacheLocation` and using `cache`."),e.cache)i=e.cache;else{if(!eC(r=e.cacheLocation||v))throw Error(`Invalid cache location "${r}"`);i=eC(r)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:g,this.cookieStorage=!1===e.legacySameSiteCookie?ev:ew,this.orgHintCookieName=ex(this.options.clientId),this.isConnectedCookieName=eT(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;let n=e.useCookiesForTransactions?this.cookieStorage:ek;this.scope=er("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new el(n,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||w,this.cacheManager=new ec(i,i.allKeys?void 0:new eO(i,this.options.clientId),this.nowProvider),this.domainUrl=J(this.options.domain),this.tokenIssuer=G(this.options.issuer,this.domainUrl),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&r===v&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new e_)}_url(e,t){let r=encodeURIComponent(btoa(JSON.stringify(this.options.earthoOneClient||b)));return`${t||this.domainUrl}${e}&earthoOneClient=${r}`}_authorizeUrl(e){return this._url(`/connect?${U(e)}`)}async _verifyIdToken(e,t,r){let i=await this.nowProvider();return ef({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:r,leeway:this.options.leeway,max_age:Y(this.options.authorizationParams.max_age),now:i})}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,t,r){let i=E(W()),n=E(W()),o=W(),a=L(await F(o)),s=ez(this.options,this.scope,e,i,n,a,e.redirect_uri||this.options.authorizationParams.redirect_uri||r,null==t?void 0:t.response_mode,e.access_id||""),c=this._authorizeUrl(s);return{nonce:n,code_verifier:o,scope:s.scope,audience:s.audience||"default",redirect_uri:s.redirect_uri,state:i,url:c,access_id:s.access_id||""}}async connectWithPopup(e,t){var r;if(e=e||{},!(t=t||{}).popup&&(t.popup=R(""),!t.popup))throw Error("Unable to open a popup for connectWithPopup - window.open returned `null`");let i=e.authorizationParams||{};i.access_id=e.accessId,e.enabledAuthProviders&&(i.enabled_providers=e.enabledAuthProviders);let n=await this._prepareAuthorizeUrl(i,{response_mode:"web_message"},window.location.origin);t.popup.location.href=n.url;let o=await C(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||m}));if(n.state!==o.state)throw new k("state_mismatch","Invalid state");let a=(null===(r=e.authorizationParams)||void 0===r?void 0:r.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:n.audience,scope:n.scope,code_verifier:n.code_verifier,grant_type:"authorization_code",code:o.code,redirect_uri:n.redirect_uri},{nonceIn:n.nonce,organization:a})}async getUser(){var e;let t=await this._getIdTokenFromCache();return null===(e=null==t?void 0:t.decodedToken)||void 0===e?void 0:e.user}async getIdToken(){var e;let t=await this._getIdTokenFromCache();return null===(e=null==t?void 0:t.decodedToken)||void 0===e?void 0:e.claims.__raw}async connectWithRedirect(e){var t;let r=eW(e),{accessId:i,openUrl:n,fragment:o,appState:a}=r,s=l(r,["accessId","openUrl","fragment","appState"]),c=(null===(t=s.authorizationParams)||void 0===t?void 0:t.organization)||this.options.authorizationParams.organization,u=s.authorizationParams||{};u.access_id=e.accessId,u.redirect_uri=u.redirect_uri||window.location.origin,e.enabledAuthProviders&&(u.enabled_providers=e.enabledAuthProviders);let d=await this._prepareAuthorizeUrl(u),{url:h}=d,f=l(d,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},f),{appState:a}),c&&{organization:c}));let p=o?`${h}#${o}`:h;n?await n(p):window.location.assign(p)}async handleRedirectCallback(e=window.location.href){let t=e.split("?").slice(1);if(0===t.length)throw Error("There are no query params available for parsing.");let{state:r,code:i,error:n,error_description:o}=P(t.join("")),a=this.transactionManager.get();if(!a)throw new k("missing_transaction","Invalid state");if(this.transactionManager.remove(),n)throw new _(n,o||n,r,a.appState);if(!a.code_verifier||a.state&&a.state!==r)throw new k("state_mismatch","Invalid state");let s=a.organization,c=a.nonce,l=a.redirect_uri;return await this._requestToken(Object.assign({audience:a.audience,scope:a.scope,code_verifier:a.code_verifier,grant_type:"authorization_code",code:i},l?{redirect_uri:l}:{}),{nonceIn:c,organization:s}),{appState:a.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isConnectedCookieName)){if(!this.cookieStorage.get(eP))return;this.cookieStorage.save(this.isConnectedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(eP)}try{await this.getTokenSilently(e)}catch(e){}}async getTokenSilently(e={}){var t;let r=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:er(this.scope,null===(t=e.authorizationParams)||void 0===t?void 0:t.scope)})}),i=await eS(()=>this._getTokenSilently(r),`${this.options.clientId}::${r.authorizationParams.audience}::${r.authorizationParams.scope}`);return e.detailedResponse?i:null==i?void 0:i.access_token}async _getTokenSilently(e){let{cacheMode:t}=e,r=l(e,["cacheMode"]);if("off"!==t){let e=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(e)return e}if("cache-only"!==t){if(await eI(()=>eE.acquireLock(eZ,5e3),10))try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),"off"!==t){let e=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(e)return e}let{id_token:e,access_token:i,oauthTokenScope:n,expires_in:o}=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(r):await this._getTokenFromIFrame(r);return Object.assign(Object.assign({id_token:e,access_token:i},n?{scope:n}:null),{expires_in:o})}finally{await eE.releaseLock(eZ),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}else throw new V}}async getTokenWithPopup(e,t={}){var r;let i=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:er(this.scope,null===(r=e.authorizationParams)||void 0===r?void 0:r.scope)})});return t=Object.assign(Object.assign({},y),t),await this.connectWithPopup(i,t),(await this.cacheManager.get(new eo({scope:i.authorizationParams.scope,audience:i.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isConnected(){return!!await this.getUser()}_buildLogoutUrl(e){null!==e.clientId?e.clientId=e.clientId||this.options.clientId:delete e.clientId;let t=e.logoutParams||{},{federated:r}=t,i=l(t,["federated"]);return this._url(`/logout?${U(Object.assign({clientId:e.clientId},i))}`)+(r?"&federated":"")}async logout(e={}){let t=l(eW(e),["openUrl"]);null===e.clientId?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isConnectedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove(en),this._buildLogoutUrl(t)}async _getTokenFromIFrame(e){let t=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),r=this.cookieStorage.get(this.orgHintCookieName);r&&!t.organization&&(t.organization=r);let{url:i,state:n,nonce:o,code_verifier:a,redirect_uri:s,scope:c,audience:l}=await this._prepareAuthorizeUrl(t,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new k("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");let r=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,u=await T(i,this.domainUrl,r);if(n!==u.state)throw new k("state_mismatch","Invalid state");let d=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:a,code:u.code,grant_type:"authorization_code",redirect_uri:s,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:o,organization:t.organization});return Object.assign(Object.assign({},d),{scope:c,oauthTokenScope:d.scope,audience:l})}catch(e){throw"login_required"===e.error&&this.logout({openUrl:!1}),e}}async _getTokenUsingRefreshToken(e){let t=await this.cacheManager.get(new eo({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if((!t||!t.refresh_token)&&!this.worker){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new Z(e.authorizationParams.audience||"default",e.authorizationParams.scope)}let r=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,i="number"==typeof e.timeoutInSeconds?1e3*e.timeoutInSeconds:null;try{let n=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:r}),i&&{timeout:i}));return Object.assign(Object.assign({},n),{scope:e.authorizationParams.scope,oauthTokenScope:n.scope,audience:e.authorizationParams.audience||"default"})}catch(t){if((t.message.indexOf("Missing Refresh Token")>-1||t.message&&t.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw t}}async _saveEntryInCache(e){let{id_token:t,decodedToken:r}=e,i=l(e,["id_token","decodedToken"]);this.userCache.set(en,{id_token:t,decodedToken:r}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(i)}async _getIdTokenFromCache(){let e=this.options.authorizationParams.audience||"default",t=await this.cacheManager.getIdToken(new eo({clientId:this.options.clientId,audience:e,scope:this.scope})),r=this.userCache.get(en);return t&&t.id_token===(null==r?void 0:r.id_token)?r:(this.userCache.set(en,t),t)}async _getEntryFromCache({scope:e,audience:t,clientId:r}){let i=await this.cacheManager.get(new eo({scope:e,audience:t,clientId:r}),60);if(i&&i.access_token){let{access_token:e,oauthTokenScope:t,expires_in:r}=i,n=await this._getIdTokenFromCache();return n&&Object.assign(Object.assign({id_token:n.id_token,access_token:e},t?{scope:t}:null),{expires_in:r})}}async _requestToken(e,t){let{nonceIn:r,organization:i}=t||{},n=await ee(Object.assign({baseUrl:this.authDomainUrl,client_id:this.options.clientId,earthoOneClient:this.options.earthoOneClient,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),o=await this._verifyIdToken(n.id_token,r,i);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},n),{decodedToken:o,scope:e.scope,audience:e.audience||"default"}),n.scope?{oauthTokenScope:n.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isConnectedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(i||o.claims.org_id),Object.assign(Object.assign({},n),{decodedToken:o})}}var eU={isConnected:!1,isLoading:!0},eF=function(){throw Error("You forgot to wrap your component in <EarthoOneProvider>.")},ej=a(a({},eU),{buildAuthorizeUrl:eF,buildLogoutUrl:eF,getUser:eF,getIdToken:eF,connectWithRedirect:eF,connectWithPopup:eF,logout:eF,handleRedirectCallback:eF}),eX=(0,n.createContext)(ej),eD=function(e){function t(r,i){var n=e.call(this,i||r)||this;return n.error=r,n.error_description=i,Object.setPrototypeOf(n,t.prototype),n}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(Error),eL=/[?&]code=[^&]+/,eA=/[?&]state=[^&]+/,eJ=/[?&]error=[^&]+/,eG=function(e){return function(t){return t instanceof Error?t:null!==t&&"object"==typeof t&&"error"in t&&"string"==typeof t.error?"error_description"in t&&"string"==typeof t.error_description?new eD(t.error,t.error_description):new eD(t.error):Error(e)}},eY=eG("Login failed"),eK=eG("Get access token failed"),eH=function(e){var t;(null==e?void 0:e.redirectUri)&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),e.authorizationParams=e.authorizationParams||{},e.authorizationParams.redirect_uri=e.redirectUri,delete e.redirectUri),(null===(t=null==e?void 0:e.authorizationParams)||void 0===t?void 0:t.redirectUri)&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),e.authorizationParams.redirect_uri=e.authorizationParams.redirectUri,delete e.authorizationParams.redirectUri)},eM=function(e,t){switch(t.type){case"LOGIN_POPUP_STARTED":return a(a({},e),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return a(a({},e),{isConnected:!!t.user,user:t.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":if(e.user===t.user)return e;return a(a({},e),{isConnected:!!t.user,user:t.user});case"LOGOUT":return a(a({},e),{isConnected:!1,user:void 0});case"ERROR":return a(a({},e),{isLoading:!1,error:t.error})}},eB=function(e){window.history.replaceState({},document.title,(null==e?void 0:e.returnTo)||window.location.pathname)},e$=function(e){var t=e.children,r=e.skipRedirectCallback,i=e.onRedirectCallback,o=void 0===i?eB:i,l=e.context,u=void 0===l?eX:l,d=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}(e,["children","skipRedirectCallback","onRedirectCallback","context"]),h=(0,n.useState)(function(){return new eN((eH(d),a(a({},d),{earthoOneClient:{name:"one-client-react",version:"2.0.12"}})))})[0],f=(0,n.useReducer)(eM,eU),p=f[0],m=f[1],y=(0,n.useRef)(!1);(0,n.useEffect)(function(){y.current||(y.current=!0,s(void 0,void 0,void 0,function(){var e,t;return c(this,function(i){switch(i.label){case 0:var n;if(i.trys.push([0,7,,8]),e=void 0,void 0===n&&(n=window.location.search),!((eL.test(n)||eJ.test(n))&&eA.test(n))||r)return[3,3];return[4,h.handleRedirectCallback()];case 1:return t=i.sent().appState,[4,h.getUser()];case 2:return e=i.sent(),o(t,e),[3,6];case 3:return[4,h.checkSession()];case 4:return i.sent(),[4,h.getUser()];case 5:e=i.sent(),i.label=6;case 6:return m({type:"INITIALISED",user:e}),[3,8];case 7:return m({type:"ERROR",error:eY(i.sent())}),[3,8];case 8:return[2]}})}))},[h,o,r]);var g=(0,n.useCallback)(function(e){return eH(e),h.connectWithRedirect(e)},[h]),v=(0,n.useCallback)(function(e,t){return s(void 0,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:m({type:"LOGIN_POPUP_STARTED"}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,h.connectWithPopup(e,t)];case 2:return r.sent(),[3,4];case 3:return m({type:"ERROR",error:eY(r.sent())}),[2];case 4:return[4,h.getUser()];case 5:return m({type:"LOGIN_POPUP_COMPLETE",user:r.sent()}),[2]}})})},[h]),b=(0,n.useCallback)(function(e){return void 0===e&&(e={}),s(void 0,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,h.logout(e)];case 1:return t.sent(),m({type:"LOGOUT"}),[2]}})})},[h]),w=(0,n.useCallback)(function(){return h.getUser()},[h]),k=(0,n.useCallback)(function(){return h.getIdToken()},[h]),_=(0,n.useCallback)(function(e){return s(void 0,void 0,void 0,function(){var t,r;return c(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,3,5]),[4,h.handleRedirectCallback(e)];case 1:return[2,i.sent()];case 2:throw eK(i.sent());case 3:return t=m,r={type:"HANDLE_REDIRECT_COMPLETE"},[4,h.getUser()];case 4:return t.apply(void 0,[(r.user=i.sent(),r)]),[7];case 5:return[2]}})})},[h]),V=(0,n.useMemo)(function(){return a(a({},p),{getUser:w,getIdToken:k,connectWithRedirect:g,connectWithPopup:v,logout:b,handleRedirectCallback:_})},[p,w,k,g,v,b,_]);return n.createElement(u.Provider,{value:V},t)},eq=function(e){return void 0===e&&(e=eX),(0,n.useContext)(e)}},251:function(e,t,r){"use strict";var i=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t)=>n(e,"name",{value:t,configurable:!0}),u=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))c.call(e,s)||s===r||n(e,s,{get:()=>t[s],enumerable:!(i=o(t,s))||i.enumerable});return e},d=(e,t,r)=>(r=null!=e?i(s(e)):{},u(!t&&e&&e.__esModule?r:n(r,"default",{value:e,enumerable:!0}),e)),h={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(h,{Next13ProgressBar:()=>w,default:()=>k,useRouter:()=>g}),e.exports=u(n({},"__esModule",{value:!0}),h);var f=d(r(2265)),p=d(r(7717)),m=r(7907),y=f.default.memo(({color:e="#0A2FFF",height:t="2px",options:r,showOnShallow:i=!1,delay:n=0,style:o})=>{let a=f.default.createElement("style",null,o||`
          #nprogress {
            pointer-events: none;
          }
          
          #nprogress .bar {
            background: ${e};
          
            position: fixed;
            z-index: 1031;
            top: 0;
            left: 0;
          
            width: 100%;
            height: ${t};
          }
          
          /* Fancy blur effect */
          #nprogress .peg {
            display: block;
            position: absolute;
            right: 0px;
            width: 100px;
            height: 100%;
            box-shadow: 0 0 10px ${e}, 0 0 5px ${e};
            opacity: 1.0;
          
            -webkit-transform: rotate(3deg) translate(0px, -4px);
                -ms-transform: rotate(3deg) translate(0px, -4px);
                    transform: rotate(3deg) translate(0px, -4px);
          }
          
          /* Remove these to get rid of the spinner */
          #nprogress .spinner {
            display: block;
            position: fixed;
            z-index: 1031;
            top: 15px;
            right: 15px;
          }
          
          #nprogress .spinner-icon {
            width: 18px;
            height: 18px;
            box-sizing: border-box;
          
            border: solid 2px transparent;
            border-top-color: ${e};
            border-left-color: ${e};
            border-radius: 50%;
          
            -webkit-animation: nprogress-spinner 400ms linear infinite;
                    animation: nprogress-spinner 400ms linear infinite;
          }
          
          .nprogress-custom-parent {
            overflow: hidden;
            position: relative;
          }
          
          .nprogress-custom-parent #nprogress .spinner,
          .nprogress-custom-parent #nprogress .bar {
            position: absolute;
          }
          
          @-webkit-keyframes nprogress-spinner {
            0%   { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
          }
          @keyframes nprogress-spinner {
            0%   { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `);p.default.configure(r||{});let s=(0,m.usePathname)(),c=(0,m.useSearchParams)();return(0,f.useEffect)(()=>{p.default.done()},[s,c]),(0,f.useEffect)(()=>{let e,t=l(()=>{e=setTimeout(p.default.start,n)},"startProgress"),r=l(()=>{clearTimeout(e),p.default.done()},"stopProgress"),o=l(e=>{let r=e.currentTarget;if("_blank"===r.target||"_top"===r.target||"_parent"===r.target||r.hasAttribute("download"))return;let n=new URL(r.href),o=new URL(location.href),a=n?.searchParams?.toString()!==o?.searchParams?.toString()&&n?.search!==o?.search,s=n?.pathname===o?.pathname&&!a;e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||i&&s||s||t()},"handleAnchorClick"),a=l(()=>{Array.from(document.querySelectorAll("a")).filter(e=>!(e.href.startsWith("tel:+")||e.href.startsWith("mailto:"))&&e.href&&"_blank"!==e.target).forEach(e=>e.addEventListener("click",o))},"handleMutation");new MutationObserver(a).observe(document,{childList:!0,subtree:!0}),window.history.pushState=new Proxy(window.history.pushState,{apply:(e,t,i)=>(r(),e.apply(t,i))})},[]),a},()=>!0);function g(){let e=(0,m.useRouter)(),t=(0,m.usePathname)();function r(r,i){let n=new URL(r,location.href),o=new URL(location.href),a=n?.searchParams?.toString()!==o?.searchParams?.toString()&&n?.search!==o?.search;return n.pathname!==t||a?(p.default.start(),e.push(r,i)):Promise.resolve(!0)}function i(r,i){return new URL(r,location.href).pathname===t?Promise.resolve(!0):(p.default.start(),e.replace(r,i))}return l(r,"push"),l(i,"replace"),{...e,push:r,replace:i}}l(g,"useRouter");var v=d(r(2265));function b(e){return l(function(t){return v.default.createElement(v.default.Suspense,null,v.default.createElement(e,{...t}))},"WithSuspenseComponent")}l(b,"withSuspense");var w=b(y),k=w},7717:function(e,t,r){var i,n;void 0!==(n="function"==typeof(i=function(){var e,t,r,i={};i.version="0.2.0";var n=i.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(e,t,r){return e<t?t:e>r?r:e}i.configure=function(e){var t,r;for(t in e)void 0!==(r=e[t])&&e.hasOwnProperty(t)&&(n[t]=r);return this},i.status=null,i.set=function(e){var t=i.isStarted();e=o(e,n.minimum,1),i.status=1===e?null:e;var r=i.render(!t),c=r.querySelector(n.barSelector),l=n.speed,u=n.easing;return r.offsetWidth,a(function(t){var o,a;""===n.positionUsing&&(n.positionUsing=i.getPositioningCSS()),s(c,(o=e,(a="translate3d"===n.positionUsing?{transform:"translate3d("+(-1+o)*100+"%,0,0)"}:"translate"===n.positionUsing?{transform:"translate("+(-1+o)*100+"%,0)"}:{"margin-left":(-1+o)*100+"%"}).transition="all "+l+"ms "+u,a)),1===e?(s(r,{transition:"none",opacity:1}),r.offsetWidth,setTimeout(function(){s(r,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){i.remove(),t()},l)},l)):setTimeout(t,l)}),this},i.isStarted=function(){return"number"==typeof i.status},i.start=function(){i.status||i.set(0);var e=function(){setTimeout(function(){i.status&&(i.trickle(),e())},n.trickleSpeed)};return n.trickle&&e(),this},i.done=function(e){return e||i.status?i.inc(.3+.5*Math.random()).set(1):this},i.inc=function(e){var t=i.status;return t?("number"!=typeof e&&(e=(1-t)*o(Math.random()*t,.1,.95)),t=o(t+e,0,.994),i.set(t)):i.start()},i.trickle=function(){return i.inc(Math.random()*n.trickleRate)},e=0,t=0,i.promise=function(r){return r&&"resolved"!==r.state()&&(0===t&&i.start(),e++,t++,r.always(function(){0==--t?(e=0,i.done()):i.set((e-t)/e)})),this},i.render=function(e){if(i.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=n.template;var r,o=t.querySelector(n.barSelector),a=e?"-100":(-1+(i.status||0))*100,c=document.querySelector(n.parent);return s(o,{transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),!n.showSpinner&&(r=t.querySelector(n.spinnerSelector))&&h(r),c!=document.body&&l(c,"nprogress-custom-parent"),c.appendChild(t),t},i.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(n.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&h(e)},i.isRendered=function(){return!!document.getElementById("nprogress")},i.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective" in e?"translate3d":t+"Transform" in e?"translate":"margin"};var a=(r=[],function(e){r.push(e),1==r.length&&function e(){var t=r.shift();t&&t(e)}()}),s=function(){var e=["Webkit","O","Moz","ms"],t={};function r(r,i,n){var o;i=t[o=(o=i).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})]||(t[o]=function(t){var r=document.body.style;if(t in r)return t;for(var i,n=e.length,o=t.charAt(0).toUpperCase()+t.slice(1);n--;)if((i=e[n]+o)in r)return i;return t}(o)),r.style[i]=n}return function(e,t){var i,n,o=arguments;if(2==o.length)for(i in t)void 0!==(n=t[i])&&t.hasOwnProperty(i)&&r(e,i,n);else r(e,o[1],o[2])}}();function c(e,t){return("string"==typeof e?e:d(e)).indexOf(" "+t+" ")>=0}function l(e,t){var r=d(e),i=r+t;c(r,t)||(e.className=i.substring(1))}function u(e,t){var r,i=d(e);c(e,t)&&(r=i.replace(" "+t+" "," "),e.className=r.substring(1,r.length-1))}function d(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function h(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return i})?i.call(t,r,t,e):i)&&(e.exports=n)},2670:function(e,t,r){"use strict";r.d(t,{cI:function(){return em}});var i=r(2265),n=e=>"checkbox"===e.type,o=e=>e instanceof Date,a=e=>null==e;let s=e=>"object"==typeof e;var c=e=>!a(e)&&!Array.isArray(e)&&s(e)&&!o(e),l=e=>c(e)&&e.target?n(e.target)?e.target.checked:e.target.value:e,u=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,d=(e,t)=>e.has(u(t)),h=e=>{let t=e.constructor&&e.constructor.prototype;return c(t)&&t.hasOwnProperty("isPrototypeOf")},f="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function p(e){let t;let r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(!(f&&(e instanceof Blob||e instanceof FileList))&&(r||c(e))))return e;else if(t=r?[]:{},r||h(e))for(let r in e)e.hasOwnProperty(r)&&(t[r]=p(e[r]));else t=e;return t}var m=e=>Array.isArray(e)?e.filter(Boolean):[],y=e=>void 0===e,g=(e,t,r)=>{if(!t||!c(e))return r;let i=m(t.split(/[,[\].]+?/)).reduce((e,t)=>a(e)?e:e[t],e);return y(i)||i===e?y(e[t])?r:e[t]:i},v=e=>"boolean"==typeof e,b=e=>/^\w*$/.test(e),w=e=>m(e.replace(/["|']|\]/g,"").split(/\.|\[/)),k=(e,t,r)=>{let i=-1,n=b(t)?[t]:w(t),o=n.length,a=o-1;for(;++i<o;){let t=n[i],o=r;if(i!==a){let r=e[t];o=c(r)||Array.isArray(r)?r:isNaN(+n[i+1])?{}:[]}if("__proto__"===t)return;e[t]=o,e=e[t]}return e};let _={BLUR:"blur",FOCUS_OUT:"focusout"},V={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},S={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};i.createContext(null);var I=(e,t,r,i=!0)=>{let n={defaultValues:t._defaultValues};for(let o in e)Object.defineProperty(n,o,{get:()=>(t._proxyFormState[o]!==V.all&&(t._proxyFormState[o]=!i||V.all),r&&(r[o]=!0),e[o])});return n},O=e=>c(e)&&!Object.keys(e).length,Z=(e,t,r,i)=>{r(e);let{name:n,...o}=e;return O(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(e=>t[e]===(!i||V.all))},x=e=>Array.isArray(e)?e:[e],P=e=>"string"==typeof e,T=(e,t,r,i,n)=>P(e)?(i&&t.watch.add(e),g(r,e,n)):Array.isArray(e)?e.map(e=>(i&&t.watch.add(e),g(r,e))):(i&&(t.watchAll=!0),r),R=(e,t,r,i,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:n||!0}}:{},C=e=>({isOnSubmit:!e||e===V.onSubmit,isOnBlur:e===V.onBlur,isOnChange:e===V.onChange,isOnAll:e===V.all,isOnTouch:e===V.onTouched}),z=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let W=(e,t,r,i)=>{for(let n of r||Object.keys(e)){let r=g(e,n);if(r){let{_f:e,...o}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],n)&&!i||e.ref&&t(e.ref,e.name)&&!i)break;W(o,t)}else c(o)&&W(o,t)}}};var E=(e,t,r)=>{let i=m(g(e,r));return k(i,"root",t[r]),k(e,r,i),e},N=e=>"file"===e.type,U=e=>"function"==typeof e,F=e=>{if(!f)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},j=e=>P(e),X=e=>"radio"===e.type,D=e=>e instanceof RegExp;let L={value:!1,isValid:!1},A={value:!0,isValid:!0};var J=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!y(e[0].attributes.value)?y(e[0].value)||""===e[0].value?A:{value:e[0].value,isValid:!0}:A:L}return L};let G={isValid:!1,value:null};var Y=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,G):G;function K(e,t,r="validate"){if(j(e)||Array.isArray(e)&&e.every(j)||v(e)&&!e)return{type:r,message:j(e)?e:"",ref:t}}var H=e=>c(e)&&!D(e)?e:{value:e,message:""},M=async(e,t,r,i,o)=>{let{ref:s,refs:l,required:u,maxLength:d,minLength:h,min:f,max:p,pattern:m,validate:b,name:w,valueAsNumber:k,mount:_,disabled:V}=e._f,I=g(t,w);if(!_||V)return{};let Z=l?l[0]:s,x=e=>{i&&Z.reportValidity&&(Z.setCustomValidity(v(e)?"":e||""),Z.reportValidity())},T={},C=X(s),z=n(s),W=(k||N(s))&&y(s.value)&&y(I)||F(s)&&""===s.value||""===I||Array.isArray(I)&&!I.length,E=R.bind(null,w,r,T),L=(e,t,r,i=S.maxLength,n=S.minLength)=>{let o=e?t:r;T[w]={type:e?i:n,message:o,ref:s,...E(e?i:n,o)}};if(o?!Array.isArray(I)||!I.length:u&&(!(C||z)&&(W||a(I))||v(I)&&!I||z&&!J(l).isValid||C&&!Y(l).isValid)){let{value:e,message:t}=j(u)?{value:!!u,message:u}:H(u);if(e&&(T[w]={type:S.required,message:t,ref:Z,...E(S.required,t)},!r))return x(t),T}if(!W&&(!a(f)||!a(p))){let e,t;let i=H(p),n=H(f);if(a(I)||isNaN(I)){let r=s.valueAsDate||new Date(I),o=e=>new Date(new Date().toDateString()+" "+e),a="time"==s.type,c="week"==s.type;P(i.value)&&I&&(e=a?o(I)>o(i.value):c?I>i.value:r>new Date(i.value)),P(n.value)&&I&&(t=a?o(I)<o(n.value):c?I<n.value:r<new Date(n.value))}else{let r=s.valueAsNumber||(I?+I:I);a(i.value)||(e=r>i.value),a(n.value)||(t=r<n.value)}if((e||t)&&(L(!!e,i.message,n.message,S.max,S.min),!r))return x(T[w].message),T}if((d||h)&&!W&&(P(I)||o&&Array.isArray(I))){let e=H(d),t=H(h),i=!a(e.value)&&I.length>+e.value,n=!a(t.value)&&I.length<+t.value;if((i||n)&&(L(i,e.message,t.message),!r))return x(T[w].message),T}if(m&&!W&&P(I)){let{value:e,message:t}=H(m);if(D(e)&&!I.match(e)&&(T[w]={type:S.pattern,message:t,ref:s,...E(S.pattern,t)},!r))return x(t),T}if(b){if(U(b)){let e=K(await b(I,t),Z);if(e&&(T[w]={...e,...E(S.validate,e.message)},!r))return x(e.message),T}else if(c(b)){let e={};for(let i in b){if(!O(e)&&!r)break;let n=K(await b[i](I,t),Z,i);n&&(e={...n,...E(i,n.message)},x(n.message),r&&(T[w]=e))}if(!O(e)&&(T[w]={ref:Z,...e},!r))return T}}return x(!0),T};function B(e,t){let r=Array.isArray(t)?t:b(t)?[t]:w(t),i=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,i=0;for(;i<r;)e=y(e)?i++:e[t[i++]];return e}(e,r),n=r.length-1,o=r[n];return i&&delete i[o],0!==n&&(c(i)&&O(i)||Array.isArray(i)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!y(e[t]))return!1;return!0}(i))&&B(e,r.slice(0,-1)),e}var $=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},q=e=>a(e)||!s(e);function Q(e,t){if(q(e)||q(t))return e===t;if(o(e)&&o(t))return e.getTime()===t.getTime();let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let n of r){let r=e[n];if(!i.includes(n))return!1;if("ref"!==n){let e=t[n];if(o(r)&&o(e)||c(r)&&c(e)||Array.isArray(r)&&Array.isArray(e)?!Q(r,e):r!==e)return!1}}return!0}var ee=e=>"select-multiple"===e.type,et=e=>X(e)||n(e),er=e=>F(e)&&e.isConnected,ei=e=>{for(let t in e)if(U(e[t]))return!0;return!1};function en(e,t={}){let r=Array.isArray(e);if(c(e)||r)for(let r in e)Array.isArray(e[r])||c(e[r])&&!ei(e[r])?(t[r]=Array.isArray(e[r])?[]:{},en(e[r],t[r])):a(e[r])||(t[r]=!0);return t}var eo=(e,t)=>(function e(t,r,i){let n=Array.isArray(t);if(c(t)||n)for(let n in t)Array.isArray(t[n])||c(t[n])&&!ei(t[n])?y(r)||q(i[n])?i[n]=Array.isArray(t[n])?en(t[n],[]):{...en(t[n])}:e(t[n],a(r)?{}:r[n],i[n]):i[n]=!Q(t[n],r[n]);return i})(e,t,en(t)),ea=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>y(e)?e:t?""===e?NaN:e?+e:e:r&&P(e)?new Date(e):i?i(e):e;function es(e){let t=e.ref;return(e.refs?e.refs.every(e=>e.disabled):t.disabled)?void 0:N(t)?t.files:X(t)?Y(e.refs).value:ee(t)?[...t.selectedOptions].map(({value:e})=>e):n(t)?J(e.refs).value:ea(y(t.value)?e.ref.value:t.value,e)}var ec=(e,t,r,i)=>{let n={};for(let r of e){let e=g(t,r);e&&k(n,r,e._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:i}},el=e=>y(e)?e:D(e)?e.source:c(e)?D(e.value)?e.value.source:e.value:e,eu=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ed(e,t,r){let i=g(e,r);if(i||b(r))return{error:i,name:r};let n=r.split(".");for(;n.length;){let i=n.join("."),o=g(t,i),a=g(e,i);if(o&&!Array.isArray(o)&&r!==i)break;if(a&&a.type)return{name:i,error:a};n.pop()}return{name:r}}var eh=(e,t,r,i,n)=>!n.isOnAll&&(!r&&n.isOnTouch?!(t||e):(r?i.isOnBlur:n.isOnBlur)?!e:(r?!i.isOnChange:!n.isOnChange)||e),ef=(e,t)=>!m(g(e,t)).length&&B(e,t);let ep={mode:V.onSubmit,reValidateMode:V.onChange,shouldFocusError:!0};function em(e={}){let t=i.useRef(),r=i.useRef(),[s,u]=i.useState({isDirty:!1,isValidating:!1,isLoading:U(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:U(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...function(e={}){let t,r={...ep,...e},i={submitCount:0,isDirty:!1,isLoading:U(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},s={},u=(c(r.defaultValues)||c(r.values))&&p(r.defaultValues||r.values)||{},h=r.shouldUnregister?{}:p(u),b={action:!1,mount:!1,watch:!1},w={mount:new Set,unMount:new Set,array:new Set,watch:new Set},S=0,I={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},Z={values:$(),array:$(),state:$()},R=C(r.mode),j=C(r.reValidateMode),X=r.criteriaMode===V.all,D=e=>t=>{clearTimeout(S),S=setTimeout(e,t)},L=async e=>{if(I.isValid||e){let e=r.resolver?O((await H()).errors):await en(s,!0);e!==i.isValid&&Z.state.next({isValid:e})}},A=(e,t)=>{(I.isValidating||I.validatingFields)&&((e||Array.from(w.mount)).forEach(e=>{e&&(t?k(i.validatingFields,e,t):B(i.validatingFields,e))}),Z.state.next({validatingFields:i.validatingFields,isValidating:!O(i.validatingFields)}))},J=(e,t)=>{k(i.errors,e,t),Z.state.next({errors:i.errors})},G=(e,t,r,i)=>{let n=g(s,e);if(n){let o=g(h,e,y(r)?g(u,e):r);y(o)||i&&i.defaultChecked||t?k(h,e,t?o:es(n._f)):eg(e,o),b.mount&&L()}},Y=(e,t,r,n,o)=>{let a=!1,c=!1,l={name:e},d=!!(g(s,e)&&g(s,e)._f.disabled);if(!r||n){I.isDirty&&(c=i.isDirty,i.isDirty=l.isDirty=em(),a=c!==l.isDirty);let r=d||Q(g(u,e),t);c=!!(!d&&g(i.dirtyFields,e)),r||d?B(i.dirtyFields,e):k(i.dirtyFields,e,!0),l.dirtyFields=i.dirtyFields,a=a||I.dirtyFields&&!r!==c}if(r){let t=g(i.touchedFields,e);t||(k(i.touchedFields,e,r),l.touchedFields=i.touchedFields,a=a||I.touchedFields&&t!==r)}return a&&o&&Z.state.next(l),a?l:{}},K=(r,n,o,a)=>{let s=g(i.errors,r),c=I.isValid&&v(n)&&i.isValid!==n;if(e.delayError&&o?(t=D(()=>J(r,o)))(e.delayError):(clearTimeout(S),t=null,o?k(i.errors,r,o):B(i.errors,r)),(o?!Q(s,o):s)||!O(a)||c){let e={...a,...c&&v(n)?{isValid:n}:{},errors:i.errors,name:r};i={...i,...e},Z.state.next(e)}},H=async e=>{A(e,!0);let t=await r.resolver(h,r.context,ec(e||w.mount,s,r.criteriaMode,r.shouldUseNativeValidation));return A(e),t},ei=async e=>{let{errors:t}=await H(e);if(e)for(let r of e){let e=g(t,r);e?k(i.errors,r,e):B(i.errors,r)}else i.errors=t;return t},en=async(e,t,n={valid:!0})=>{for(let o in e){let a=e[o];if(a){let{_f:e,...s}=a;if(e){let s=w.array.has(e.name);A([o],!0);let c=await M(a,h,X,r.shouldUseNativeValidation&&!t,s);if(A([o]),c[e.name]&&(n.valid=!1,t))break;t||(g(c,e.name)?s?E(i.errors,c,e.name):k(i.errors,e.name,c[e.name]):B(i.errors,e.name))}s&&await en(s,t,n)}}return n.valid},em=(e,t)=>(e&&t&&k(h,e,t),!Q(eV(),u)),ey=(e,t,r)=>T(e,w,{...b.mount?h:y(t)?u:P(e)?{[e]:t}:t},r,t),eg=(e,t,r={})=>{let i=g(s,e),o=t;if(i){let r=i._f;r&&(r.disabled||k(h,e,ea(t,r)),o=F(r.ref)&&a(t)?"":t,ee(r.ref)?[...r.ref.options].forEach(e=>e.selected=o.includes(e.value)):r.refs?n(r.ref)?r.refs.length>1?r.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find(t=>t===e.value):o===e.value)):r.refs[0]&&(r.refs[0].checked=!!o):r.refs.forEach(e=>e.checked=e.value===o):N(r.ref)?r.ref.value="":(r.ref.value=o,r.ref.type||Z.values.next({name:e,values:{...h}})))}(r.shouldDirty||r.shouldTouch)&&Y(e,o,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&e_(e)},ev=(e,t,r)=>{for(let i in t){let n=t[i],a=`${e}.${i}`,c=g(s,a);!w.array.has(e)&&q(n)&&(!c||c._f)||o(n)?eg(a,n,r):ev(a,n,r)}},eb=(e,t,r={})=>{let n=g(s,e),o=w.array.has(e),c=p(t);k(h,e,c),o?(Z.array.next({name:e,values:{...h}}),(I.isDirty||I.dirtyFields)&&r.shouldDirty&&Z.state.next({name:e,dirtyFields:eo(u,h),isDirty:em(e,c)})):!n||n._f||a(c)?eg(e,c,r):ev(e,c,r),z(e,w)&&Z.state.next({...i}),Z.values.next({name:b.mount?e:void 0,values:{...h}})},ew=async e=>{b.mount=!0;let n=e.target,o=n.name,a=!0,c=g(s,o),u=e=>{a=Number.isNaN(e)||e===g(h,o,e)};if(c){let d,f;let p=n.type?es(c._f):l(e),m=e.type===_.BLUR||e.type===_.FOCUS_OUT,y=!eu(c._f)&&!r.resolver&&!g(i.errors,o)&&!c._f.deps||eh(m,g(i.touchedFields,o),i.isSubmitted,j,R),v=z(o,w,m);k(h,o,p),m?(c._f.onBlur&&c._f.onBlur(e),t&&t(0)):c._f.onChange&&c._f.onChange(e);let b=Y(o,p,m,!1),V=!O(b)||v;if(m||Z.values.next({name:o,type:e.type,values:{...h}}),y)return I.isValid&&L(),V&&Z.state.next({name:o,...v?{}:b});if(!m&&v&&Z.state.next({...i}),r.resolver){let{errors:e}=await H([o]);if(u(p),a){let t=ed(i.errors,s,o),r=ed(e,s,t.name||o);d=r.error,o=r.name,f=O(e)}}else A([o],!0),d=(await M(c,h,X,r.shouldUseNativeValidation))[o],A([o]),u(p),a&&(d?f=!1:I.isValid&&(f=await en(s,!0)));a&&(c._f.deps&&e_(c._f.deps),K(o,f,d,b))}},ek=(e,t)=>{if(g(i.errors,t)&&e.focus)return e.focus(),1},e_=async(e,t={})=>{let n,o;let a=x(e);if(r.resolver){let t=await ei(y(e)?e:a);n=O(t),o=e?!a.some(e=>g(t,e)):n}else e?((o=(await Promise.all(a.map(async e=>{let t=g(s,e);return await en(t&&t._f?{[e]:t}:t)}))).every(Boolean))||i.isValid)&&L():o=n=await en(s);return Z.state.next({...!P(e)||I.isValid&&n!==i.isValid?{}:{name:e},...r.resolver||!e?{isValid:n}:{},errors:i.errors}),t.shouldFocus&&!o&&W(s,ek,e?a:w.mount),o},eV=e=>{let t={...b.mount?h:u};return y(e)?t:P(e)?g(t,e):e.map(e=>g(t,e))},eS=(e,t)=>({invalid:!!g((t||i).errors,e),isDirty:!!g((t||i).dirtyFields,e),isTouched:!!g((t||i).touchedFields,e),isValidating:!!g((t||i).validatingFields,e),error:g((t||i).errors,e)}),eI=(e,t,r)=>{let n=(g(s,e,{_f:{}})._f||{}).ref,{ref:o,message:a,type:c,...l}=g(i.errors,e)||{};k(i.errors,e,{...l,...t,ref:n}),Z.state.next({name:e,errors:i.errors,isValid:!1}),r&&r.shouldFocus&&n&&n.focus&&n.focus()},eO=(e,t={})=>{for(let n of e?x(e):w.mount)w.mount.delete(n),w.array.delete(n),t.keepValue||(B(s,n),B(h,n)),t.keepError||B(i.errors,n),t.keepDirty||B(i.dirtyFields,n),t.keepTouched||B(i.touchedFields,n),t.keepIsValidating||B(i.validatingFields,n),r.shouldUnregister||t.keepDefaultValue||B(u,n);Z.values.next({values:{...h}}),Z.state.next({...i,...t.keepDirty?{isDirty:em()}:{}}),t.keepIsValid||L()},eZ=({disabled:e,name:t,field:r,fields:i,value:n})=>{if(v(e)&&b.mount||e){let o=e?void 0:y(n)?es(r?r._f:g(i,t)._f):n;k(h,t,o),Y(t,o,!1,!1,!0)}},ex=(e,t={})=>{let i=g(s,e),n=v(t.disabled);return k(s,e,{...i||{},_f:{...i&&i._f?i._f:{ref:{name:e}},name:e,mount:!0,...t}}),w.mount.add(e),i?eZ({field:i,disabled:t.disabled,name:e,value:t.value}):G(e,!0,t.value),{...n?{disabled:t.disabled}:{},...r.progressive?{required:!!t.required,min:el(t.min),max:el(t.max),minLength:el(t.minLength),maxLength:el(t.maxLength),pattern:el(t.pattern)}:{},name:e,onChange:ew,onBlur:ew,ref:n=>{if(n){ex(e,t),i=g(s,e);let r=y(n.value)&&n.querySelectorAll&&n.querySelectorAll("input,select,textarea")[0]||n,o=et(r),a=i._f.refs||[];(o?a.find(e=>e===r):r===i._f.ref)||(k(s,e,{_f:{...i._f,...o?{refs:[...a.filter(er),r,...Array.isArray(g(u,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),G(e,!1,void 0,r))}else(i=g(s,e,{}))._f&&(i._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&!(d(w.array,e)&&b.action)&&w.unMount.add(e)}}},eP=()=>r.shouldFocusError&&W(s,ek,w.mount),eT=(e,t)=>async n=>{let o;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let a=p(h);if(Z.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await H();i.errors=e,a=t}else await en(s);if(B(i.errors,"root"),O(i.errors)){Z.state.next({errors:{}});try{await e(a,n)}catch(e){o=e}}else t&&await t({...i.errors},n),eP(),setTimeout(eP);if(Z.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:O(i.errors)&&!o,submitCount:i.submitCount+1,errors:i.errors}),o)throw o},eR=(t,r={})=>{let n=t?p(t):u,o=p(n),a=O(t),c=a?u:o;if(r.keepDefaultValues||(u=n),!r.keepValues){if(r.keepDirtyValues)for(let e of w.mount)g(i.dirtyFields,e)?k(c,e,g(h,e)):eb(e,g(c,e));else{if(f&&y(t))for(let e of w.mount){let t=g(s,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(F(e)){let t=e.closest("form");if(t){t.reset();break}}}}s={}}h=e.shouldUnregister?r.keepDefaultValues?p(u):{}:p(c),Z.array.next({values:{...c}}),Z.values.next({values:{...c}})}w={mount:r.keepDirtyValues?w.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},b.mount=!I.isValid||!!r.keepIsValid||!!r.keepDirtyValues,b.watch=!!e.shouldUnregister,Z.state.next({submitCount:r.keepSubmitCount?i.submitCount:0,isDirty:!a&&(r.keepDirty?i.isDirty:!!(r.keepDefaultValues&&!Q(t,u))),isSubmitted:!!r.keepIsSubmitted&&i.isSubmitted,dirtyFields:a?[]:r.keepDirtyValues?r.keepDefaultValues&&h?eo(u,h):i.dirtyFields:r.keepDefaultValues&&t?eo(u,t):{},touchedFields:r.keepTouched?i.touchedFields:{},errors:r.keepErrors?i.errors:{},isSubmitSuccessful:!!r.keepIsSubmitSuccessful&&i.isSubmitSuccessful,isSubmitting:!1})},eC=(e,t)=>eR(U(e)?e(h):e,t);return{control:{register:ex,unregister:eO,getFieldState:eS,handleSubmit:eT,setError:eI,_executeSchema:H,_getWatch:ey,_getDirty:em,_updateValid:L,_removeUnmounted:()=>{for(let e of w.unMount){let t=g(s,e);t&&(t._f.refs?t._f.refs.every(e=>!er(e)):!er(t._f.ref))&&eO(e)}w.unMount=new Set},_updateFieldArray:(e,t=[],r,n,o=!0,a=!0)=>{if(n&&r){if(b.action=!0,a&&Array.isArray(g(s,e))){let t=r(g(s,e),n.argA,n.argB);o&&k(s,e,t)}if(a&&Array.isArray(g(i.errors,e))){let t=r(g(i.errors,e),n.argA,n.argB);o&&k(i.errors,e,t),ef(i.errors,e)}if(I.touchedFields&&a&&Array.isArray(g(i.touchedFields,e))){let t=r(g(i.touchedFields,e),n.argA,n.argB);o&&k(i.touchedFields,e,t)}I.dirtyFields&&(i.dirtyFields=eo(u,h)),Z.state.next({name:e,isDirty:em(e,t),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else k(h,e,t)},_updateDisabledField:eZ,_getFieldArray:t=>m(g(b.mount?h:u,t,e.shouldUnregister?g(u,t,[]):[])),_reset:eR,_resetDefaultValues:()=>U(r.defaultValues)&&r.defaultValues().then(e=>{eC(e,r.resetOptions),Z.state.next({isLoading:!1})}),_updateFormState:e=>{i={...i,...e}},_disableForm:e=>{v(e)&&(Z.state.next({disabled:e}),W(s,(t,r)=>{let i=g(s,r);i&&(t.disabled=i._f.disabled||e,Array.isArray(i._f.refs)&&i._f.refs.forEach(t=>{t.disabled=i._f.disabled||e}))},0,!1))},_subjects:Z,_proxyFormState:I,_setErrors:e=>{i.errors=e,Z.state.next({errors:i.errors,isValid:!1})},get _fields(){return s},get _formValues(){return h},get _state(){return b},set _state(value){b=value},get _defaultValues(){return u},get _names(){return w},set _names(value){w=value},get _formState(){return i},set _formState(value){i=value},get _options(){return r},set _options(value){r={...r,...value}}},trigger:e_,register:ex,handleSubmit:eT,watch:(e,t)=>U(e)?Z.values.subscribe({next:r=>e(ey(void 0,t),r)}):ey(e,t,!0),setValue:eb,getValues:eV,reset:eC,resetField:(e,t={})=>{g(s,e)&&(y(t.defaultValue)?eb(e,p(g(u,e))):(eb(e,t.defaultValue),k(u,e,p(t.defaultValue))),t.keepTouched||B(i.touchedFields,e),t.keepDirty||(B(i.dirtyFields,e),i.isDirty=t.defaultValue?em(e,p(g(u,e))):em()),!t.keepError&&(B(i.errors,e),I.isValid&&L()),Z.state.next({...i}))},clearErrors:e=>{e&&x(e).forEach(e=>B(i.errors,e)),Z.state.next({errors:e?i.errors:{}})},unregister:eO,setError:eI,setFocus:(e,t={})=>{let r=g(s,e),i=r&&r._f;if(i){let e=i.refs?i.refs[0]:i.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:eS}}(e),formState:s});let h=t.current.control;return h._options=e,!function(e){let t=i.useRef(e);t.current=e,i.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}({subject:h._subjects.state,next:e=>{Z(e,h._proxyFormState,h._updateFormState,!0)&&u({...h._formState})}}),i.useEffect(()=>h._disableForm(e.disabled),[h,e.disabled]),i.useEffect(()=>{if(h._proxyFormState.isDirty){let e=h._getDirty();e!==s.isDirty&&h._subjects.state.next({isDirty:e})}},[h,s.isDirty]),i.useEffect(()=>{e.values&&!Q(e.values,r.current)?(h._reset(e.values,h._options.resetOptions),r.current=e.values,u(e=>({...e}))):h._resetDefaultValues()},[e.values,h]),i.useEffect(()=>{e.errors&&h._setErrors(e.errors)},[e.errors,h]),i.useEffect(()=>{h._state.mount||(h._updateValid(),h._state.mount=!0),h._state.watch&&(h._state.watch=!1,h._subjects.state.next({...h._formState})),h._removeUnmounted()}),i.useEffect(()=>{e.shouldUnregister&&h._subjects.values.next({values:h._getWatch()})},[e.shouldUnregister,h]),t.current.formState=I(s,h),t.current}}}]);