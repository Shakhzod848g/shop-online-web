{"version":3,"file":"one-client-react.min.js","sources":["../node_modules/@eartho/one-client-js/dist/one-client-js.production.esm.js","../src/auth-state.tsx","../src/eartho-context.tsx","../src/errors.tsx","../src/utils.tsx","../src/reducer.tsx","../src/eartho-provider.tsx","../src/use-eartho.tsx","../src/with-authentication-required.tsx","../src/with-eartho.tsx"],"sourcesContent":["function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols===\"function\")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t}typeof SuppressedError===\"function\"?SuppressedError:function(error,suppressed,message){var e=new Error(message);return e.name=\"SuppressedError\",e.error=error,e.suppressed=suppressed,e};var commonjsGlobal=typeof globalThis!==\"undefined\"?globalThis:typeof window!==\"undefined\"?window:typeof global!==\"undefined\"?global:typeof self!==\"undefined\"?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,\"default\")?x[\"default\"]:x}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var processLock=createCommonjsModule((function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});var ProcessLocking=function(){function ProcessLocking(){var _this=this;this.locked=new Map;this.addToLocked=function(key,toAdd){var callbacks=_this.locked.get(key);if(callbacks===undefined){if(toAdd===undefined){_this.locked.set(key,[])}else{_this.locked.set(key,[toAdd])}}else{if(toAdd!==undefined){callbacks.unshift(toAdd);_this.locked.set(key,callbacks)}}};this.isLocked=function(key){return _this.locked.has(key)};this.lock=function(key){return new Promise((function(resolve,reject){if(_this.isLocked(key)){_this.addToLocked(key,resolve)}else{_this.addToLocked(key);resolve()}}))};this.unlock=function(key){var callbacks=_this.locked.get(key);if(callbacks===undefined||callbacks.length===0){_this.locked.delete(key);return}var toCall=callbacks.pop();_this.locked.set(key,callbacks);if(toCall!==undefined){setTimeout(toCall,0)}}}ProcessLocking.getInstance=function(){if(ProcessLocking.instance===undefined){ProcessLocking.instance=new ProcessLocking}return ProcessLocking.instance};return ProcessLocking}();function getLock(){return ProcessLocking.getInstance()}exports.default=getLock}));unwrapExports(processLock);var browserTabsLock=createCommonjsModule((function(module,exports){var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator[\"throw\"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};var __generator=commonjsGlobal&&commonjsGlobal.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol===\"function\"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError(\"Generator is already executing.\");while(_)try{if(f=1,y&&(t=op[0]&2?y[\"return\"]:op[0]?y[\"throw\"]||((t=y[\"return\"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var _this=commonjsGlobal;Object.defineProperty(exports,\"__esModule\",{value:true});var LOCK_STORAGE_KEY=\"browser-tabs-lock-key\";var DEFAULT_STORAGE_HANDLER={key:function(index){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){throw new Error(\"Unsupported\")}))}))},getItem:function(key){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){throw new Error(\"Unsupported\")}))}))},clear:function(){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,window.localStorage.clear()]}))}))},removeItem:function(key){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){throw new Error(\"Unsupported\")}))}))},setItem:function(key,value){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(_a){throw new Error(\"Unsupported\")}))}))},keySync:function(index){return window.localStorage.key(index)},getItemSync:function(key){return window.localStorage.getItem(key)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(key){return window.localStorage.removeItem(key)},setItemSync:function(key,value){return window.localStorage.setItem(key,value)}};function delay(milliseconds){return new Promise((function(resolve){return setTimeout(resolve,milliseconds)}))}function generateRandomString(length){var CHARS=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\";var randomstring=\"\";for(var i=0;i<length;i++){var INDEX=Math.floor(Math.random()*CHARS.length);randomstring+=CHARS[INDEX]}return randomstring}function getLockId(){return Date.now().toString()+generateRandomString(15)}var SuperTokensLock=function(){function SuperTokensLock(storageHandler){this.acquiredIatSet=new Set;this.storageHandler=undefined;this.id=getLockId();this.acquireLock=this.acquireLock.bind(this);this.releaseLock=this.releaseLock.bind(this);this.releaseLock__private__=this.releaseLock__private__.bind(this);this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this);this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this);this.storageHandler=storageHandler;if(SuperTokensLock.waiters===undefined){SuperTokensLock.waiters=[]}}SuperTokensLock.prototype.acquireLock=function(lockKey,timeout){if(timeout===void 0){timeout=5e3}return __awaiter(this,void 0,void 0,(function(){var iat,MAX_TIME,STORAGE_KEY,STORAGE,lockObj,TIMEOUT_KEY,lockObjPostDelay,parsedLockObjPostDelay;return __generator(this,(function(_a){switch(_a.label){case 0:iat=Date.now()+generateRandomString(4);MAX_TIME=Date.now()+timeout;STORAGE_KEY=LOCK_STORAGE_KEY+\"-\"+lockKey;STORAGE=this.storageHandler===undefined?DEFAULT_STORAGE_HANDLER:this.storageHandler;_a.label=1;case 1:if(!(Date.now()<MAX_TIME))return[3,8];return[4,delay(30)];case 2:_a.sent();lockObj=STORAGE.getItemSync(STORAGE_KEY);if(!(lockObj===null))return[3,5];TIMEOUT_KEY=this.id+\"-\"+lockKey+\"-\"+iat;return[4,delay(Math.floor(Math.random()*25))];case 3:_a.sent();STORAGE.setItemSync(STORAGE_KEY,JSON.stringify({id:this.id,iat:iat,timeoutKey:TIMEOUT_KEY,timeAcquired:Date.now(),timeRefreshed:Date.now()}));return[4,delay(30)];case 4:_a.sent();lockObjPostDelay=STORAGE.getItemSync(STORAGE_KEY);if(lockObjPostDelay!==null){parsedLockObjPostDelay=JSON.parse(lockObjPostDelay);if(parsedLockObjPostDelay.id===this.id&&parsedLockObjPostDelay.iat===iat){this.acquiredIatSet.add(iat);this.refreshLockWhileAcquired(STORAGE_KEY,iat);return[2,true]}}return[3,7];case 5:SuperTokensLock.lockCorrector(this.storageHandler===undefined?DEFAULT_STORAGE_HANDLER:this.storageHandler);return[4,this.waitForSomethingToChange(MAX_TIME)];case 6:_a.sent();_a.label=7;case 7:iat=Date.now()+generateRandomString(4);return[3,1];case 8:return[2,false]}}))}))};SuperTokensLock.prototype.refreshLockWhileAcquired=function(storageKey,iat){return __awaiter(this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){setTimeout((function(){return __awaiter(_this,void 0,void 0,(function(){var STORAGE,lockObj,parsedLockObj;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,processLock.default().lock(iat)];case 1:_a.sent();if(!this.acquiredIatSet.has(iat)){processLock.default().unlock(iat);return[2]}STORAGE=this.storageHandler===undefined?DEFAULT_STORAGE_HANDLER:this.storageHandler;lockObj=STORAGE.getItemSync(storageKey);if(lockObj!==null){parsedLockObj=JSON.parse(lockObj);parsedLockObj.timeRefreshed=Date.now();STORAGE.setItemSync(storageKey,JSON.stringify(parsedLockObj));processLock.default().unlock(iat)}else{processLock.default().unlock(iat);return[2]}this.refreshLockWhileAcquired(storageKey,iat);return[2]}}))}))}),1e3);return[2]}))}))};SuperTokensLock.prototype.waitForSomethingToChange=function(MAX_TIME){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,new Promise((function(resolve){var resolvedCalled=false;var startedAt=Date.now();var MIN_TIME_TO_WAIT=50;var removedListeners=false;function stopWaiting(){if(!removedListeners){window.removeEventListener(\"storage\",stopWaiting);SuperTokensLock.removeFromWaiting(stopWaiting);clearTimeout(timeOutId);removedListeners=true}if(!resolvedCalled){resolvedCalled=true;var timeToWait=MIN_TIME_TO_WAIT-(Date.now()-startedAt);if(timeToWait>0){setTimeout(resolve,timeToWait)}else{resolve(null)}}}window.addEventListener(\"storage\",stopWaiting);SuperTokensLock.addToWaiting(stopWaiting);var timeOutId=setTimeout(stopWaiting,Math.max(0,MAX_TIME-Date.now()))}))];case 1:_a.sent();return[2]}}))}))};SuperTokensLock.addToWaiting=function(func){this.removeFromWaiting(func);if(SuperTokensLock.waiters===undefined){return}SuperTokensLock.waiters.push(func)};SuperTokensLock.removeFromWaiting=function(func){if(SuperTokensLock.waiters===undefined){return}SuperTokensLock.waiters=SuperTokensLock.waiters.filter((function(i){return i!==func}))};SuperTokensLock.notifyWaiters=function(){if(SuperTokensLock.waiters===undefined){return}var waiters=SuperTokensLock.waiters.slice();waiters.forEach((function(i){return i()}))};SuperTokensLock.prototype.releaseLock=function(lockKey){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.releaseLock__private__(lockKey)];case 1:return[2,_a.sent()]}}))}))};SuperTokensLock.prototype.releaseLock__private__=function(lockKey){return __awaiter(this,void 0,void 0,(function(){var STORAGE,STORAGE_KEY,lockObj,parsedlockObj;return __generator(this,(function(_a){switch(_a.label){case 0:STORAGE=this.storageHandler===undefined?DEFAULT_STORAGE_HANDLER:this.storageHandler;STORAGE_KEY=LOCK_STORAGE_KEY+\"-\"+lockKey;lockObj=STORAGE.getItemSync(STORAGE_KEY);if(lockObj===null){return[2]}parsedlockObj=JSON.parse(lockObj);if(!(parsedlockObj.id===this.id))return[3,2];return[4,processLock.default().lock(parsedlockObj.iat)];case 1:_a.sent();this.acquiredIatSet.delete(parsedlockObj.iat);STORAGE.removeItemSync(STORAGE_KEY);processLock.default().unlock(parsedlockObj.iat);SuperTokensLock.notifyWaiters();_a.label=2;case 2:return[2]}}))}))};SuperTokensLock.lockCorrector=function(storageHandler){var MIN_ALLOWED_TIME=Date.now()-5e3;var STORAGE=storageHandler;var KEYS=[];var currIndex=0;while(true){var key=STORAGE.keySync(currIndex);if(key===null){break}KEYS.push(key);currIndex++}var notifyWaiters=false;for(var i=0;i<KEYS.length;i++){var LOCK_KEY=KEYS[i];if(LOCK_KEY.includes(LOCK_STORAGE_KEY)){var lockObj=STORAGE.getItemSync(LOCK_KEY);if(lockObj!==null){var parsedlockObj=JSON.parse(lockObj);if(parsedlockObj.timeRefreshed===undefined&&parsedlockObj.timeAcquired<MIN_ALLOWED_TIME||parsedlockObj.timeRefreshed!==undefined&&parsedlockObj.timeRefreshed<MIN_ALLOWED_TIME){STORAGE.removeItemSync(LOCK_KEY);notifyWaiters=true}}}}if(notifyWaiters){SuperTokensLock.notifyWaiters()}};SuperTokensLock.waiters=undefined;return SuperTokensLock}();exports.default=SuperTokensLock}));var Lock=unwrapExports(browserTabsLock);var version=\"2.1.3\";const DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS=600;const DEFAULT_POPUP_CONFIG_OPTIONS={timeoutInSeconds:DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS};const DEFAULT_SILENT_TOKEN_RETRY_COUNT=3;const CLEANUP_IFRAME_TIMEOUT_IN_SECONDS=2;const DEFAULT_FETCH_TIMEOUT_MS=1e4;const CACHE_LOCATION_MEMORY=\"memory\";const CACHE_LOCATION_LOCAL_STORAGE=\"localstorage\";const MISSING_REFRESH_TOKEN_ERROR_MESSAGE=\"Missing Refresh Token\";const INVALID_REFRESH_TOKEN_ERROR_MESSAGE=\"invalid refresh token\";const DEFAULT_SCOPE=\"openid profile email\";const DEFAULT_SESSION_CHECK_EXPIRY_DAYS=1;const DEFAULT_EARTHO_CLIENT={name:\"one-client-js\",version:version};const DEFAULT_NOW_PROVIDER=()=>Date.now();class GenericError extends Error{constructor(error,error_description){super(error_description);this.error=error;this.error_description=error_description;Object.setPrototypeOf(this,GenericError.prototype)}static fromPayload({error:error,error_description:error_description}){return new GenericError(error,error_description)}}class AuthenticationError extends GenericError{constructor(error,error_description,state,appState=null){super(error,error_description);this.state=state;this.appState=appState;Object.setPrototypeOf(this,AuthenticationError.prototype)}}class TimeoutError extends GenericError{constructor(){super(\"timeout\",\"Timeout\");Object.setPrototypeOf(this,TimeoutError.prototype)}}class PopupTimeoutError extends TimeoutError{constructor(popup){super();this.popup=popup;Object.setPrototypeOf(this,PopupTimeoutError.prototype)}}class PopupCancelledError extends GenericError{constructor(popup){super(\"cancelled\",\"Popup closed\");this.popup=popup;Object.setPrototypeOf(this,PopupCancelledError.prototype)}}class MfaRequiredError extends GenericError{constructor(error,error_description,mfa_token){super(error,error_description);this.mfa_token=mfa_token;Object.setPrototypeOf(this,MfaRequiredError.prototype)}}class MissingRefreshTokenError extends GenericError{constructor(audience,scope){super(\"missing_refresh_token\",`Missing Refresh Token (audience: '${valueOrEmptyString(audience,[\"default\"])}', scope: '${valueOrEmptyString(scope)}')`);this.audience=audience;this.scope=scope;Object.setPrototypeOf(this,MissingRefreshTokenError.prototype)}}function valueOrEmptyString(value,exclude=[]){return value&&!exclude.includes(value)?value:\"\"}const parseAuthenticationResult=queryString=>{if(queryString.indexOf(\"#\")>-1){queryString=queryString.substring(0,queryString.indexOf(\"#\"))}const searchParams=new URLSearchParams(queryString);return{state:searchParams.get(\"state\"),code:searchParams.get(\"code\")||undefined,error:searchParams.get(\"error\")||undefined,error_description:searchParams.get(\"error_description\")||undefined}};const runIframe=(authorizeUrl,eventOrigin,timeoutInSeconds=DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS)=>new Promise(((res,rej)=>{const iframe=window.document.createElement(\"iframe\");iframe.setAttribute(\"width\",\"0\");iframe.setAttribute(\"height\",\"0\");iframe.style.display=\"none\";const removeIframe=()=>{if(window.document.body.contains(iframe)){window.document.body.removeChild(iframe);window.removeEventListener(\"message\",iframeEventHandler,false)}};let iframeEventHandler;const timeoutSetTimeoutId=setTimeout((()=>{rej(new TimeoutError);removeIframe()}),timeoutInSeconds*1e3);iframeEventHandler=function(e){if(e.origin!=eventOrigin)return;if(!e.data||e.data.type!==\"authorization_response\")return;const eventSource=e.source;if(eventSource){eventSource.close()}e.data.response.error?rej(GenericError.fromPayload(e.data.response)):res(e.data.response);clearTimeout(timeoutSetTimeoutId);window.removeEventListener(\"message\",iframeEventHandler,false);setTimeout(removeIframe,CLEANUP_IFRAME_TIMEOUT_IN_SECONDS*1e3)};window.addEventListener(\"message\",iframeEventHandler,false);window.document.body.appendChild(iframe);iframe.setAttribute(\"src\",authorizeUrl)}));const openPopup=url=>{const width=400;const height=600;const left=window.screenX+(window.innerWidth-width)/2;const top=window.screenY+(window.innerHeight-height)/2;return window.open(url,\"eartho:authorize:popup\",`left=${left},top=${top},width=${width},height=${height},resizable,scrollbars=yes,status=1`)};const runPopup=config=>new Promise(((resolve,reject)=>{let popupEventListener;const popupTimer=setInterval((()=>{if(config.popup&&config.popup.closed){clearInterval(popupTimer);clearTimeout(timeoutId);window.removeEventListener(\"message\",popupEventListener,false);reject(new PopupCancelledError(config.popup))}}),1e3);const timeoutId=setTimeout((()=>{clearInterval(popupTimer);reject(new PopupTimeoutError(config.popup));window.removeEventListener(\"message\",popupEventListener,false)}),(config.timeoutInSeconds||DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS)*1e3);popupEventListener=function(e){if(!e.data||e.data.type!==\"authorization_response\"){return}clearTimeout(timeoutId);clearInterval(popupTimer);window.removeEventListener(\"message\",popupEventListener,false);config.popup.close();if(e.data.response.error){return reject(GenericError.fromPayload(e.data.response))}resolve(e.data.response)};window.addEventListener(\"message\",popupEventListener)}));const getCrypto=()=>window.crypto;const createRandomString=()=>{const charset=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.\";let random=\"\";const randomValues=Array.from(getCrypto().getRandomValues(new Uint8Array(43)));randomValues.forEach((v=>random+=charset[v%charset.length]));return random};const encode=value=>btoa(value);const stripUndefined=params=>Object.keys(params).filter((k=>typeof params[k]!==\"undefined\")).reduce(((acc,key)=>Object.assign(Object.assign({},acc),{[key]:params[key]})),{});const createQueryParams=_a=>{var{clientId:client_id}=_a,params=__rest(_a,[\"clientId\"]);return new URLSearchParams(stripUndefined(Object.assign({client_id:client_id},params))).toString()};const sha256=async s=>{const digestOp=getCrypto().subtle.digest({name:\"SHA-256\"},(new TextEncoder).encode(s));return await digestOp};const urlEncodeB64=input=>{const b64Chars={\"+\":\"-\",\"/\":\"_\",\"=\":\"\"};return input.replace(/[+/=]/g,(m=>b64Chars[m]))};const decodeB64=input=>decodeURIComponent(atob(input).split(\"\").map((c=>\"%\"+(\"00\"+c.charCodeAt(0).toString(16)).slice(-2))).join(\"\"));const urlDecodeB64=input=>decodeB64(input.replace(/_/g,\"/\").replace(/-/g,\"+\"));const bufferToBase64UrlEncoded=input=>{const ie11SafeInput=new Uint8Array(input);return urlEncodeB64(window.btoa(String.fromCharCode(...Array.from(ie11SafeInput))))};const validateCrypto=()=>{if(!getCrypto()){throw new Error(\"For security reasons, `window.crypto` is required to run `one-client-js`.\")}if(typeof getCrypto().subtle===\"undefined\"){throw new Error(`\\n      one-client-js must run on a secure origin.\\n    `)}};const getDomain=domainUrl=>{if(!/^https?:\\/\\//.test(domainUrl)){return`https://${domainUrl}`}return domainUrl};const getTokenIssuer=(issuer,domainUrl)=>{if(issuer){return issuer.startsWith(\"https://\")?issuer:`https://${issuer}/`}return`${domainUrl}/`};const parseNumber=value=>{if(typeof value!==\"string\"){return value}return parseInt(value,10)||undefined};const sendMessage=(message,to)=>new Promise((function(resolve,reject){const messageChannel=new MessageChannel;messageChannel.port1.onmessage=function(event){if(event.data.error){reject(new Error(event.data.error))}else{resolve(event.data)}messageChannel.port1.close()};to.postMessage(message,[messageChannel.port2])}));const createAbortController=()=>new AbortController;const dofetch=async(fetchUrl,fetchOptions)=>{const response=await fetch(fetchUrl,fetchOptions);return{ok:response.ok,json:await response.json()}};const fetchWithoutWorker=async(fetchUrl,fetchOptions,timeout)=>{const controller=createAbortController();fetchOptions.signal=controller.signal;let timeoutId;return Promise.race([dofetch(fetchUrl,fetchOptions),new Promise(((_,reject)=>{timeoutId=setTimeout((()=>{controller.abort();reject(new Error(\"Timeout when executing 'fetch'\"))}),timeout)}))]).finally((()=>{clearTimeout(timeoutId)}))};const fetchWithWorker=async(fetchUrl,audience,scope,fetchOptions,timeout,worker,useFormData)=>sendMessage({auth:{audience:audience,scope:scope},timeout:timeout,fetchUrl:fetchUrl,fetchOptions:fetchOptions,useFormData:useFormData},worker);const switchFetch=async(fetchUrl,audience,scope,fetchOptions,worker,useFormData,timeout=DEFAULT_FETCH_TIMEOUT_MS)=>{if(worker){return fetchWithWorker(fetchUrl,audience,scope,fetchOptions,timeout,worker,useFormData)}else{return fetchWithoutWorker(fetchUrl,fetchOptions,timeout)}};async function getJSON(url,timeout,audience,scope,options,worker,useFormData){let fetchError=null;let response;for(let i=0;i<DEFAULT_SILENT_TOKEN_RETRY_COUNT;i++){try{response=await switchFetch(url,audience,scope,options,worker,useFormData,timeout);fetchError=null;break}catch(e){fetchError=e}}if(fetchError){throw fetchError}const _a=response.json,{error:error,error_description:error_description}=_a,data=__rest(_a,[\"error\",\"error_description\"]),{ok:ok}=response;if(!ok){const errorMessage=error_description||`HTTP error. Unable to fetch ${url}`;if(error===\"mfa_required\"){throw new MfaRequiredError(error,errorMessage,data.mfa_token)}if(error===\"missing_refresh_token\"){throw new MissingRefreshTokenError(audience,scope)}throw new GenericError(error||\"request_error\",errorMessage)}return data}async function oauthToken(_a,worker){var{baseUrl:baseUrl,timeout:timeout,audience:audience,scope:scope,earthoOneClient:earthoOneClient,useFormData:useFormData}=_a,options=__rest(_a,[\"baseUrl\",\"timeout\",\"audience\",\"scope\",\"earthoOneClient\",\"useFormData\"]);const body=useFormData?createQueryParams(options):JSON.stringify(options);return await getJSON(`${baseUrl}/access/oauth/token`,timeout,audience||\"default\",scope,{method:\"POST\",body:body,headers:{\"Content-Type\":useFormData?\"application/x-www-form-urlencoded\":\"application/json\",\"Eartho-Client\":btoa(JSON.stringify(earthoOneClient||DEFAULT_EARTHO_CLIENT))}},worker,useFormData)}const dedupe=arr=>Array.from(new Set(arr));const getUniqueScopes=(...scopes)=>dedupe(scopes.filter(Boolean).join(\" \").trim().split(/\\s+/)).join(\" \");const CACHE_KEY_PREFIX=\"@@oneclientjs@@\";const CACHE_KEY_ID_TOKEN_SUFFIX=\"@@user@@\";class CacheKey{constructor(data,prefix=CACHE_KEY_PREFIX,suffix){this.prefix=prefix;this.suffix=suffix;this.clientId=data.clientId;this.scope=data.scope;this.audience=data.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join(\"::\")}static fromKey(key){const[prefix,clientId,audience,scope]=key.split(\"::\");return new CacheKey({clientId:clientId,scope:scope,audience:audience},prefix)}static fromCacheEntry(entry){const{scope:scope,audience:audience,client_id:clientId}=entry;return new CacheKey({scope:scope,audience:audience,clientId:clientId})}}class LocalStorageCache{set(key,entry){localStorage.setItem(key,JSON.stringify(entry))}get(key){const json=window.localStorage.getItem(key);if(!json)return;try{const payload=JSON.parse(json);return payload}catch(e){return}}remove(key){localStorage.removeItem(key)}allKeys(){return Object.keys(window.localStorage).filter((key=>key.startsWith(CACHE_KEY_PREFIX)))}}class InMemoryCache{constructor(){this.enclosedCache=function(){let cache={};return{set(key,entry){cache[key]=entry},get(key){const cacheEntry=cache[key];if(!cacheEntry){return}return cacheEntry},remove(key){delete cache[key]},allKeys(){return Object.keys(cache)}}}()}}const DEFAULT_EXPIRY_ADJUSTMENT_SECONDS=0;class CacheManager{constructor(cache,keyManifest,nowProvider){this.cache=cache;this.keyManifest=keyManifest;this.nowProvider=nowProvider||DEFAULT_NOW_PROVIDER}async setIdToken(clientId,idToken,decodedToken){var _a;const cacheKey=this.getIdTokenCacheKey(clientId);await this.cache.set(cacheKey,{id_token:idToken,decodedToken:decodedToken});await((_a=this.keyManifest)===null||_a===void 0?void 0:_a.add(cacheKey))}async getIdToken(cacheKey){const entry=await this.cache.get(this.getIdTokenCacheKey(cacheKey.clientId));if(!entry&&cacheKey.scope&&cacheKey.audience){const entryByScope=await this.get(cacheKey);if(!entryByScope){return}if(!entryByScope.id_token||!entryByScope.decodedToken){return}return{id_token:entryByScope.id_token,decodedToken:entryByScope.decodedToken}}if(!entry){return}return{id_token:entry.id_token,decodedToken:entry.decodedToken}}async get(cacheKey,expiryAdjustmentSeconds=DEFAULT_EXPIRY_ADJUSTMENT_SECONDS){var _a;let wrappedEntry=await this.cache.get(cacheKey.toKey());if(!wrappedEntry){const keys=await this.getCacheKeys();if(!keys)return;const matchedKey=this.matchExistingCacheKey(cacheKey,keys);if(matchedKey){wrappedEntry=await this.cache.get(matchedKey)}}if(!wrappedEntry){return}const now=await this.nowProvider();const nowSeconds=Math.floor(now/1e3);if(wrappedEntry.expiresAt-expiryAdjustmentSeconds<nowSeconds){if(wrappedEntry.body.refresh_token){wrappedEntry.body={refresh_token:wrappedEntry.body.refresh_token};await this.cache.set(cacheKey.toKey(),wrappedEntry);return wrappedEntry.body}await this.cache.remove(cacheKey.toKey());await((_a=this.keyManifest)===null||_a===void 0?void 0:_a.remove(cacheKey.toKey()));return}return wrappedEntry.body}async set(entry){var _a;const cacheKey=new CacheKey({clientId:entry.client_id,scope:entry.scope,audience:entry.audience});const wrappedEntry=await this.wrapCacheEntry(entry);await this.cache.set(cacheKey.toKey(),wrappedEntry);await((_a=this.keyManifest)===null||_a===void 0?void 0:_a.add(cacheKey.toKey()))}async clear(clientId){var _a;const keys=await this.getCacheKeys();if(!keys)return;await keys.filter((key=>clientId?key.includes(clientId):true)).reduce((async(memo,key)=>{await memo;await this.cache.remove(key)}),Promise.resolve());await((_a=this.keyManifest)===null||_a===void 0?void 0:_a.clear())}async wrapCacheEntry(entry){const now=await this.nowProvider();const expiresInTime=Math.floor(now/1e3)+entry.expires_in;return{body:entry,expiresAt:expiresInTime}}async getCacheKeys(){var _a;if(this.keyManifest){return(_a=await this.keyManifest.get())===null||_a===void 0?void 0:_a.keys}else if(this.cache.allKeys){return this.cache.allKeys()}}getIdTokenCacheKey(clientId){return new CacheKey({clientId:clientId},CACHE_KEY_PREFIX,CACHE_KEY_ID_TOKEN_SUFFIX).toKey()}matchExistingCacheKey(keyToMatch,allKeys){return allKeys.filter((key=>{var _a;const cacheKey=CacheKey.fromKey(key);const scopeSet=new Set(cacheKey.scope&&cacheKey.scope.split(\" \"));const scopesToMatch=((_a=keyToMatch.scope)===null||_a===void 0?void 0:_a.split(\" \"))||[];const hasAllScopes=cacheKey.scope&&scopesToMatch.reduce(((acc,current)=>acc&&scopeSet.has(current)),true);return cacheKey.prefix===CACHE_KEY_PREFIX&&cacheKey.clientId===keyToMatch.clientId&&cacheKey.audience===keyToMatch.audience&&hasAllScopes}))[0]}}const TRANSACTION_STORAGE_KEY_PREFIX=\"a0.spajs.txs\";class TransactionManager{constructor(storage,clientId,cookieDomain){this.storage=storage;this.clientId=clientId;this.cookieDomain=cookieDomain;this.storageKey=`${TRANSACTION_STORAGE_KEY_PREFIX}.${this.clientId}`}create(transaction){this.storage.save(this.storageKey,transaction,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const isNumber=n=>typeof n===\"number\";const idTokendecoded=[\"iss\",\"aud\",\"exp\",\"nbf\",\"iat\",\"jti\",\"azp\",\"nonce\",\"auth_time\",\"at_hash\",\"c_hash\",\"acr\",\"amr\",\"sub_jwk\",\"cnf\",\"sip_from_tag\",\"sip_date\",\"sip_callid\",\"sip_cseq_num\",\"sip_via_branch\",\"orig\",\"dest\",\"mky\",\"events\",\"toe\",\"txn\",\"rph\",\"sid\",\"vot\",\"vtm\"];const decode=token=>{const parts=token.split(\".\");const[header,payload,signature]=parts;if(parts.length!==3||!header||!payload||!signature){throw new Error(\"ID token could not be decoded\")}const payloadJSON=JSON.parse(urlDecodeB64(payload));const claims={__raw:token};const user={};Object.keys(payloadJSON).forEach((k=>{claims[k]=payloadJSON[k];if(!idTokendecoded.includes(k)){user[k]=payloadJSON[k]}}));return{encoded:{header:header,payload:payload,signature:signature},header:JSON.parse(urlDecodeB64(header)),claims:claims,user:user.user}};const verify=options=>{if(!options.id_token){throw new Error(\"ID token is required but missing\")}const decoded=decode(options.id_token);if(!decoded.claims.iss){throw new Error(\"Issuer (iss) claim must be a string present in the ID token\")}if(decoded.claims.iss!==options.iss){throw new Error(`Issuer (iss) claim mismatch in the ID token; expected \"${options.iss}\", found \"${decoded.claims.iss}\"`)}if(decoded.header.alg!==\"RS256\"){throw new Error(`Signature algorithm of \"${decoded.header.alg}\" is not supported. Expected the ID token to be signed with \"RS256\".`)}if(!decoded.claims.aud||!(typeof decoded.claims.aud===\"string\"||Array.isArray(decoded.claims.aud))){throw new Error(\"Audience (aud) claim must be a string or array of strings present in the ID token\")}if(Array.isArray(decoded.claims.aud)){if(!decoded.claims.aud.includes(options.aud)){throw new Error(`Audience (aud) claim mismatch in the ID token; expected \"${options.aud}\" but was not one of \"${decoded.claims.aud.join(\", \")}\"`)}if(decoded.claims.aud.length>1){if(!decoded.claims.azp){throw new Error(\"Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values\")}if(decoded.claims.azp!==options.aud){throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected \"${options.aud}\", found \"${decoded.claims.azp}\"`)}}}else if(decoded.claims.aud!==options.aud){throw new Error(`Audience (aud) claim mismatch in the ID token; expected \"${options.aud}\" but found \"${decoded.claims.aud}\"`)}if(options.nonce){if(!decoded.claims.nonce){throw new Error(\"Nonce (nonce) claim must be a string present in the ID token\")}if(decoded.claims.nonce!==options.nonce){throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected \"${options.nonce}\", found \"${decoded.claims.nonce}\"`)}}if(options.max_age&&!isNumber(decoded.claims.auth_time)){throw new Error(\"Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified\")}if(decoded.claims.exp==null||!isNumber(decoded.claims.exp)){throw new Error(\"Expiration Time (exp) claim must be a number present in the ID token\")}if(!isNumber(decoded.claims.iat)){throw new Error(\"Issued At (iat) claim must be a number present in the ID token\")}const leeway=options.leeway||60;const now=new Date(options.now||Date.now());const expDate=new Date(0);expDate.setUTCSeconds(decoded.claims.exp+leeway);if(now>expDate){throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${now}) is after expiration time (${expDate})`)}if(decoded.claims.nbf!=null&&isNumber(decoded.claims.nbf)){const nbfDate=new Date(0);nbfDate.setUTCSeconds(decoded.claims.nbf-leeway);if(now<nbfDate){throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${now}) is before ${nbfDate}`)}}if(decoded.claims.auth_time!=null&&isNumber(decoded.claims.auth_time)){const authTimeDate=new Date(0);authTimeDate.setUTCSeconds(parseInt(decoded.claims.auth_time)+options.max_age+leeway);if(now>authTimeDate){throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${now}) is after last auth at ${authTimeDate}`)}}if(options.organization){const org=options.organization.trim();if(org.startsWith(\"org_\")){const orgId=org;if(!decoded.claims.org_id){throw new Error(\"Organization ID (org_id) claim must be a string present in the ID token\")}else if(orgId!==decoded.claims.org_id){throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected \"${orgId}\", found \"${decoded.claims.org_id}\"`)}}else{const orgName=org.toLowerCase();if(!decoded.claims.org_name){throw new Error(\"Organization Name (org_name) claim must be a string present in the ID token\")}else if(orgName!==decoded.claims.org_name){throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected \"${orgName}\", found \"${decoded.claims.org_name}\"`)}}}return decoded};var esCookie=createCommonjsModule((function(module,exports){var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};exports.__esModule=true;function stringifyAttribute(name,value){if(!value){return\"\"}var stringified=\"; \"+name;if(value===true){return stringified}return stringified+\"=\"+value}function stringifyAttributes(attributes){if(typeof attributes.expires===\"number\"){var expires=new Date;expires.setMilliseconds(expires.getMilliseconds()+attributes.expires*864e5);attributes.expires=expires}return stringifyAttribute(\"Expires\",attributes.expires?attributes.expires.toUTCString():\"\")+stringifyAttribute(\"Domain\",attributes.domain)+stringifyAttribute(\"Path\",attributes.path)+stringifyAttribute(\"Secure\",attributes.secure)+stringifyAttribute(\"SameSite\",attributes.sameSite)}function encode(name,value,attributes){return encodeURIComponent(name).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\\(/g,\"%28\").replace(/\\)/g,\"%29\")+\"=\"+encodeURIComponent(value).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+stringifyAttributes(attributes)}exports.encode=encode;function parse(cookieString){var result={};var cookies=cookieString?cookieString.split(\"; \"):[];var rdecode=/(%[\\dA-F]{2})+/gi;for(var i=0;i<cookies.length;i++){var parts=cookies[i].split(\"=\");var cookie=parts.slice(1).join(\"=\");if(cookie.charAt(0)==='\"'){cookie=cookie.slice(1,-1)}try{var name_1=parts[0].replace(rdecode,decodeURIComponent);result[name_1]=cookie.replace(rdecode,decodeURIComponent)}catch(e){}}return result}exports.parse=parse;function getAll(){return parse(document.cookie)}exports.getAll=getAll;function get(name){return getAll()[name]}exports.get=get;function set(name,value,attributes){document.cookie=encode(name,value,__assign({path:\"/\"},attributes))}exports.set=set;function remove(name,attributes){set(name,\"\",__assign(__assign({},attributes),{expires:-1}))}exports.remove=remove}));unwrapExports(esCookie);esCookie.encode;esCookie.parse;esCookie.getAll;var esCookie_4=esCookie.get;var esCookie_5=esCookie.set;var esCookie_6=esCookie.remove;const CookieStorage={get(key){const value=esCookie_4(key);if(typeof value===\"undefined\"){return}return JSON.parse(value)},save(key,value,options){let cookieAttributes={};if(\"https:\"===window.location.protocol){cookieAttributes={secure:true,sameSite:\"none\"}}if(options===null||options===void 0?void 0:options.daysUntilExpire){cookieAttributes.expires=options.daysUntilExpire}if(options===null||options===void 0?void 0:options.cookieDomain){cookieAttributes.domain=options.cookieDomain}esCookie_5(key,JSON.stringify(value),cookieAttributes)},remove(key,options){let cookieAttributes={};if(options===null||options===void 0?void 0:options.cookieDomain){cookieAttributes.domain=options.cookieDomain}esCookie_6(key,cookieAttributes)}};const LEGACY_PREFIX=\"_legacy_\";const CookieStorageWithLegacySameSite={get(key){const value=CookieStorage.get(key);if(value){return value}return CookieStorage.get(`${LEGACY_PREFIX}${key}`)},save(key,value,options){let cookieAttributes={};if(\"https:\"===window.location.protocol){cookieAttributes={secure:true}}if(options===null||options===void 0?void 0:options.daysUntilExpire){cookieAttributes.expires=options.daysUntilExpire}if(options===null||options===void 0?void 0:options.cookieDomain){cookieAttributes.domain=options.cookieDomain}esCookie_5(`${LEGACY_PREFIX}${key}`,JSON.stringify(value),cookieAttributes);CookieStorage.save(key,value,options)},remove(key,options){let cookieAttributes={};if(options===null||options===void 0?void 0:options.cookieDomain){cookieAttributes.domain=options.cookieDomain}esCookie_6(key,cookieAttributes);CookieStorage.remove(key,options);CookieStorage.remove(`${LEGACY_PREFIX}${key}`,options)}};const SessionStorage={get(key){if(typeof sessionStorage===\"undefined\"){return}const value=sessionStorage.getItem(key);if(value==null){return}return JSON.parse(value)},save(key,value){sessionStorage.setItem(key,JSON.stringify(value))},remove(key){sessionStorage.removeItem(key)}};function decodeBase64(base64,enableUnicode){var binaryString=atob(base64);if(enableUnicode){var binaryView=new Uint8Array(binaryString.length);for(var i=0,n=binaryString.length;i<n;++i){binaryView[i]=binaryString.charCodeAt(i)}return String.fromCharCode.apply(null,new Uint16Array(binaryView.buffer))}return binaryString}function createURL(base64,sourcemapArg,enableUnicodeArg){var sourcemap=sourcemapArg===undefined?null:sourcemapArg;var enableUnicode=enableUnicodeArg===undefined?false:enableUnicodeArg;var source=decodeBase64(base64,enableUnicode);var start=source.indexOf(\"\\n\",10)+1;var body=source.substring(start)+(sourcemap?\"//# sourceMappingURL=\"+sourcemap:\"\");var blob=new Blob([body],{type:\"application/javascript\"});return URL.createObjectURL(blob)}function createBase64WorkerFactory(base64,sourcemapArg,enableUnicodeArg){var url;return function WorkerFactory(options){url=url||createURL(base64,sourcemapArg,enableUnicodeArg);return new Worker(url,options)}}var WorkerFactory=createBase64WorkerFactory(\"Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgR2VuZXJpY0Vycm9yIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZXJyb3IsZXJyb3JfZGVzY3JpcHRpb24pe3N1cGVyKGVycm9yX2Rlc2NyaXB0aW9uKTt0aGlzLmVycm9yPWVycm9yO3RoaXMuZXJyb3JfZGVzY3JpcHRpb249ZXJyb3JfZGVzY3JpcHRpb247T2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsR2VuZXJpY0Vycm9yLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjplcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplcnJvcl9kZXNjcmlwdGlvbn0pe3JldHVybiBuZXcgR2VuZXJpY0Vycm9yKGVycm9yLGVycm9yX2Rlc2NyaXB0aW9uKX19Y2xhc3MgTWlzc2luZ1JlZnJlc2hUb2tlbkVycm9yIGV4dGVuZHMgR2VuZXJpY0Vycm9ye2NvbnN0cnVjdG9yKGF1ZGllbmNlLHNjb3BlKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7dmFsdWVPckVtcHR5U3RyaW5nKGF1ZGllbmNlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7dmFsdWVPckVtcHR5U3RyaW5nKHNjb3BlKX0nKWApO3RoaXMuYXVkaWVuY2U9YXVkaWVuY2U7dGhpcy5zY29wZT1zY29wZTtPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxNaXNzaW5nUmVmcmVzaFRva2VuRXJyb3IucHJvdG90eXBlKX19ZnVuY3Rpb24gdmFsdWVPckVtcHR5U3RyaW5nKHZhbHVlLGV4Y2x1ZGU9W10pe3JldHVybiB2YWx1ZSYmIWV4Y2x1ZGUuaW5jbHVkZXModmFsdWUpP3ZhbHVlOiIifWZ1bmN0aW9uIF9fcmVzdChzLGUpe3ZhciB0PXt9O2Zvcih2YXIgcCBpbiBzKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLHApJiZlLmluZGV4T2YocCk8MCl0W3BdPXNbcF07aWYocyE9bnVsbCYmdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM9PT0iZnVuY3Rpb24iKWZvcih2YXIgaT0wLHA9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTtpPHAubGVuZ3RoO2krKyl7aWYoZS5pbmRleE9mKHBbaV0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLHBbaV0pKXRbcFtpXV09c1twW2ldXX1yZXR1cm4gdH10eXBlb2YgU3VwcHJlc3NlZEVycm9yPT09ImZ1bmN0aW9uIj9TdXBwcmVzc2VkRXJyb3I6ZnVuY3Rpb24oZXJyb3Isc3VwcHJlc3NlZCxtZXNzYWdlKXt2YXIgZT1uZXcgRXJyb3IobWVzc2FnZSk7cmV0dXJuIGUubmFtZT0iU3VwcHJlc3NlZEVycm9yIixlLmVycm9yPWVycm9yLGUuc3VwcHJlc3NlZD1zdXBwcmVzc2VkLGV9O2NvbnN0IHN0cmlwVW5kZWZpbmVkPXBhcmFtcz0+T2JqZWN0LmtleXMocGFyYW1zKS5maWx0ZXIoKGs9PnR5cGVvZiBwYXJhbXNba10hPT0idW5kZWZpbmVkIikpLnJlZHVjZSgoKGFjYyxrZXkpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYWNjKSx7W2tleV06cGFyYW1zW2tleV19KSkse30pO2NvbnN0IGNyZWF0ZVF1ZXJ5UGFyYW1zPV9hPT57dmFye2NsaWVudElkOmNsaWVudF9pZH09X2EscGFyYW1zPV9fcmVzdChfYSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKHN0cmlwVW5kZWZpbmVkKE9iamVjdC5hc3NpZ24oe2NsaWVudF9pZDpjbGllbnRfaWR9LHBhcmFtcykpKS50b1N0cmluZygpfTtsZXQgcmVmcmVzaFRva2Vucz17fTtjb25zdCBjYWNoZUtleT0oYXVkaWVuY2Usc2NvcGUpPT5gJHthdWRpZW5jZX18JHtzY29wZX1gO2NvbnN0IGdldFJlZnJlc2hUb2tlbj0oYXVkaWVuY2Usc2NvcGUpPT5yZWZyZXNoVG9rZW5zW2NhY2hlS2V5KGF1ZGllbmNlLHNjb3BlKV07Y29uc3Qgc2V0UmVmcmVzaFRva2VuPShyZWZyZXNoVG9rZW4sYXVkaWVuY2Usc2NvcGUpPT5yZWZyZXNoVG9rZW5zW2NhY2hlS2V5KGF1ZGllbmNlLHNjb3BlKV09cmVmcmVzaFRva2VuO2NvbnN0IGRlbGV0ZVJlZnJlc2hUb2tlbj0oYXVkaWVuY2Usc2NvcGUpPT5kZWxldGUgcmVmcmVzaFRva2Vuc1tjYWNoZUtleShhdWRpZW5jZSxzY29wZSldO2NvbnN0IHdhaXQ9dGltZT0+bmV3IFByb21pc2UoKHJlc29sdmU9PnNldFRpbWVvdXQocmVzb2x2ZSx0aW1lKSkpO2NvbnN0IGZvcm1EYXRhVG9PYmplY3Q9Zm9ybURhdGE9Pntjb25zdCBxdWVyeVBhcmFtcz1uZXcgVVJMU2VhcmNoUGFyYW1zKGZvcm1EYXRhKTtjb25zdCBwYXJzZWRRdWVyeT17fTtxdWVyeVBhcmFtcy5mb3JFYWNoKCgodmFsLGtleSk9PntwYXJzZWRRdWVyeVtrZXldPXZhbH0pKTtyZXR1cm4gcGFyc2VkUXVlcnl9O2NvbnN0IG1lc3NhZ2VIYW5kbGVyPWFzeW5jKHtkYXRhOnt0aW1lb3V0OnRpbWVvdXQsYXV0aDphdXRoLGZldGNoVXJsOmZldGNoVXJsLGZldGNoT3B0aW9uczpmZXRjaE9wdGlvbnMsdXNlRm9ybURhdGE6dXNlRm9ybURhdGF9LHBvcnRzOltwb3J0XX0pPT57bGV0IGpzb247Y29uc3R7YXVkaWVuY2U6YXVkaWVuY2Usc2NvcGU6c2NvcGV9PWF1dGh8fHt9O3RyeXtjb25zdCBib2R5PXVzZUZvcm1EYXRhP2Zvcm1EYXRhVG9PYmplY3QoZmV0Y2hPcHRpb25zLmJvZHkpOkpTT04ucGFyc2UoZmV0Y2hPcHRpb25zLmJvZHkpO2lmKCFib2R5LnJlZnJlc2hfdG9rZW4mJmJvZHkuZ3JhbnRfdHlwZT09PSJyZWZyZXNoX3Rva2VuIil7Y29uc3QgcmVmcmVzaFRva2VuPWdldFJlZnJlc2hUb2tlbihhdWRpZW5jZSxzY29wZSk7aWYoIXJlZnJlc2hUb2tlbil7dGhyb3cgbmV3IE1pc3NpbmdSZWZyZXNoVG9rZW5FcnJvcihhdWRpZW5jZSxzY29wZSl9ZmV0Y2hPcHRpb25zLmJvZHk9dXNlRm9ybURhdGE/Y3JlYXRlUXVlcnlQYXJhbXMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGJvZHkpLHtyZWZyZXNoX3Rva2VuOnJlZnJlc2hUb2tlbn0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYm9keSkse3JlZnJlc2hfdG9rZW46cmVmcmVzaFRva2VufSkpfWxldCBhYm9ydENvbnRyb2xsZXI7aWYodHlwZW9mIEFib3J0Q29udHJvbGxlcj09PSJmdW5jdGlvbiIpe2Fib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyO2ZldGNoT3B0aW9ucy5zaWduYWw9YWJvcnRDb250cm9sbGVyLnNpZ25hbH1sZXQgcmVzcG9uc2U7dHJ5e3Jlc3BvbnNlPWF3YWl0IFByb21pc2UucmFjZShbd2FpdCh0aW1lb3V0KSxmZXRjaChmZXRjaFVybCxPYmplY3QuYXNzaWduKHt9LGZldGNoT3B0aW9ucykpXSl9Y2F0Y2goZXJyb3Ipe3BvcnQucG9zdE1lc3NhZ2Uoe2Vycm9yOmVycm9yLm1lc3NhZ2V9KTtyZXR1cm59aWYoIXJlc3BvbnNlKXtpZihhYm9ydENvbnRyb2xsZXIpYWJvcnRDb250cm9sbGVyLmFib3J0KCk7cG9ydC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtyZXR1cm59anNvbj1hd2FpdCByZXNwb25zZS5qc29uKCk7aWYoanNvbi5yZWZyZXNoX3Rva2VuKXtzZXRSZWZyZXNoVG9rZW4oanNvbi5yZWZyZXNoX3Rva2VuLGF1ZGllbmNlLHNjb3BlKTtkZWxldGUganNvbi5yZWZyZXNoX3Rva2VufWVsc2V7ZGVsZXRlUmVmcmVzaFRva2VuKGF1ZGllbmNlLHNjb3BlKX1wb3J0LnBvc3RNZXNzYWdlKHtvazpyZXNwb25zZS5vayxqc29uOmpzb259KX1jYXRjaChlcnJvcil7cG9ydC5wb3N0TWVzc2FnZSh7b2s6ZmFsc2UsanNvbjp7ZXJyb3I6ZXJyb3IuZXJyb3IsZXJyb3JfZGVzY3JpcHRpb246ZXJyb3IubWVzc2FnZX19KX19O3thZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtZXNzYWdlSGFuZGxlcil9fSkoKTsKCg==\",null,false);const singlePromiseMap={};const singlePromise=(cb,key)=>{let promise=singlePromiseMap[key];if(!promise){promise=cb().finally((()=>{delete singlePromiseMap[key];promise=null}));singlePromiseMap[key]=promise}return promise};const retryPromise=async(cb,maxNumberOfRetries=3)=>{for(let i=0;i<maxNumberOfRetries;i++){if(await cb()){return true}}return false};class CacheKeyManifest{constructor(cache,clientId){this.cache=cache;this.clientId=clientId;this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(key){var _a;const keys=new Set(((_a=await this.cache.get(this.manifestKey))===null||_a===void 0?void 0:_a.keys)||[]);keys.add(key);await this.cache.set(this.manifestKey,{keys:[...keys]})}async remove(key){const entry=await this.cache.get(this.manifestKey);if(entry){const keys=new Set(entry.keys);keys.delete(key);if(keys.size>0){return await this.cache.set(this.manifestKey,{keys:[...keys]})}return await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(clientId){return`${CACHE_KEY_PREFIX}::${clientId}`}}const GET_TOKEN_SILENTLY_LOCK_KEY=\"eartho.lock.getTokenSilently\";const buildOrganizationHintCookieName=clientId=>`eartho.${clientId}.organization_hint`;const OLD_IS_AUTHENTICATED_COOKIE_NAME=\"eartho.is.authenticated\";const buildisConnectedCookieName=clientId=>`eartho.${clientId}.is.authenticated`;const cacheLocationBuilders={memory:()=>(new InMemoryCache).enclosedCache,localstorage:()=>new LocalStorageCache};const cacheFactory=location=>cacheLocationBuilders[location];const getAuthorizeParams=(clientOptions,scope,authorizationParams,state,nonce,code_challenge,redirect_uri,response_mode,access_id)=>Object.assign(Object.assign(Object.assign({client_id:clientOptions.clientId},clientOptions.authorizationParams),authorizationParams),{scope:getUniqueScopes(scope,authorizationParams.scope),response_type:\"code\",response_mode:response_mode||\"query\",state:state,nonce:nonce,redirect_uri:redirect_uri||clientOptions.authorizationParams.redirect_uri,code_challenge:code_challenge,code_challenge_method:\"S256\",access_id:authorizationParams.access_id});const patchOpenUrlWithOnRedirect=options=>{const{openUrl:openUrl,onRedirect:onRedirect}=options,originalOptions=__rest(options,[\"openUrl\",\"onRedirect\"]);const result=Object.assign(Object.assign({},originalOptions),{openUrl:openUrl===false||openUrl?openUrl:onRedirect});return result};const lock=new Lock;class EarthoOne{constructor(options){var _a;this.userCache=(new InMemoryCache).enclosedCache;this.defaultOptions={authorizationParams:{scope:DEFAULT_SCOPE},useRefreshTokensFallback:false,useFormData:true};this._releaseLockOnPageHide=async()=>{await lock.releaseLock(GET_TOKEN_SILENTLY_LOCK_KEY);window.removeEventListener(\"pagehide\",this._releaseLockOnPageHide)};const authDomain=\"api.eartho.io\";options.domain=\"one.eartho.io\";options.issuer=\"https://one.eartho.world/\";options.authorizationParams=options.authorizationParams||{};options.authorizationParams.audience=((_a=options.authorizationParams)===null||_a===void 0?void 0:_a.audience)||options.clientId;options.cacheLocation=CACHE_LOCATION_LOCAL_STORAGE;options.useRefreshTokens=true;this.domainUrl=getDomain(options.domain);this.authDomainUrl=getDomain(authDomain);this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),options),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),options.authorizationParams)});typeof window!==\"undefined\"&&validateCrypto();if(options.cache&&options.cacheLocation){console.warn(\"Both `cache` and `cacheLocation` options have been specified in the EarthoOne configuration; ignoring `cacheLocation` and using `cache`.\")}let cacheLocation;let cache;if(options.cache){cache=options.cache}else{cacheLocation=options.cacheLocation||CACHE_LOCATION_MEMORY;if(!cacheFactory(cacheLocation)){throw new Error(`Invalid cache location \"${cacheLocation}\"`)}cache=cacheFactory(cacheLocation)()}this.httpTimeoutMs=options.httpTimeoutInSeconds?options.httpTimeoutInSeconds*1e3:DEFAULT_FETCH_TIMEOUT_MS;this.cookieStorage=options.legacySameSiteCookie===false?CookieStorage:CookieStorageWithLegacySameSite;this.orgHintCookieName=buildOrganizationHintCookieName(this.options.clientId);this.isConnectedCookieName=buildisConnectedCookieName(this.options.clientId);this.sessionCheckExpiryDays=options.sessionCheckExpiryDays||DEFAULT_SESSION_CHECK_EXPIRY_DAYS;const transactionStorage=options.useCookiesForTransactions?this.cookieStorage:SessionStorage;this.scope=getUniqueScopes(\"openid\",this.options.authorizationParams.scope,this.options.useRefreshTokens?\"offline_access\":\"\");this.transactionManager=new TransactionManager(transactionStorage,this.options.clientId,this.options.cookieDomain);this.nowProvider=this.options.nowProvider||DEFAULT_NOW_PROVIDER;this.cacheManager=new CacheManager(cache,!cache.allKeys?new CacheKeyManifest(cache,this.options.clientId):undefined,this.nowProvider);this.domainUrl=getDomain(this.options.domain);this.tokenIssuer=getTokenIssuer(this.options.issuer,this.domainUrl);if(typeof window!==\"undefined\"&&window.Worker&&this.options.useRefreshTokens&&cacheLocation===CACHE_LOCATION_MEMORY){if(this.options.workerUrl){this.worker=new Worker(this.options.workerUrl)}else{this.worker=new WorkerFactory}}}_url(path,domain){const earthoOneClient=encodeURIComponent(btoa(JSON.stringify(this.options.earthoOneClient||DEFAULT_EARTHO_CLIENT)));return`${domain||this.domainUrl}${path}&earthoOneClient=${earthoOneClient}`}_authorizeUrl(authorizeOptions){return this._url(`/connect?${createQueryParams(authorizeOptions)}`)}async _verifyIdToken(id_token,nonce,organization){const now=await this.nowProvider();return verify({iss:this.tokenIssuer,aud:this.options.clientId,id_token:id_token,nonce:nonce,organization:organization,leeway:this.options.leeway,max_age:parseNumber(this.options.authorizationParams.max_age),now:now})}_processOrgHint(organization){if(organization){this.cookieStorage.save(this.orgHintCookieName,organization,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain})}else{this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}}async _prepareAuthorizeUrl(authorizationParams,authorizeOptions,fallbackRedirectUri){const state=encode(createRandomString());const nonce=encode(createRandomString());const code_verifier=createRandomString();const code_challengeBuffer=await sha256(code_verifier);const code_challenge=bufferToBase64UrlEncoded(code_challengeBuffer);const params=getAuthorizeParams(this.options,this.scope,authorizationParams,state,nonce,code_challenge,authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||fallbackRedirectUri,authorizeOptions===null||authorizeOptions===void 0?void 0:authorizeOptions.response_mode,authorizationParams.access_id||\"\");const url=this._authorizeUrl(params);return{nonce:nonce,code_verifier:code_verifier,scope:params.scope,audience:params.audience||\"default\",redirect_uri:params.redirect_uri,state:state,url:url,access_id:params.access_id||\"\"}}async connectWithPopup(options,config){var _a;options=options||{};config=config||{};if(!config.popup){config.popup=openPopup(\"\");if(!config.popup){throw new Error(\"Unable to open a popup for connectWithPopup - window.open returned `null`\")}}const authorizationParams=options.authorizationParams||{};authorizationParams.access_id=options.accessId;if(options.enabledAuthProviders)authorizationParams.enabled_providers=options.enabledAuthProviders;const params=await this._prepareAuthorizeUrl(authorizationParams,{response_mode:\"web_message\"},window.location.origin);config.popup.location.href=params.url;const codeResult=await runPopup(Object.assign(Object.assign({},config),{timeoutInSeconds:config.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS}));if(params.state!==codeResult.state){throw new GenericError(\"state_mismatch\",\"Invalid state\")}const organization=((_a=options.authorizationParams)===null||_a===void 0?void 0:_a.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:params.audience,scope:params.scope,code_verifier:params.code_verifier,grant_type:\"authorization_code\",code:codeResult.code,redirect_uri:params.redirect_uri},{nonceIn:params.nonce,organization:organization})}async getUser(){var _a;const cache=await this._getIdTokenFromCache();return(_a=cache===null||cache===void 0?void 0:cache.decodedToken)===null||_a===void 0?void 0:_a.user}async getIdToken(){var _a;const cache=await this._getIdTokenFromCache();return(_a=cache===null||cache===void 0?void 0:cache.decodedToken)===null||_a===void 0?void 0:_a.claims.__raw}async connectWithRedirect(options){var _a;const _b=patchOpenUrlWithOnRedirect(options),{accessId:accessId,openUrl:openUrl,fragment:fragment,appState:appState}=_b,urlOptions=__rest(_b,[\"accessId\",\"openUrl\",\"fragment\",\"appState\"]);const organization=((_a=urlOptions.authorizationParams)===null||_a===void 0?void 0:_a.organization)||this.options.authorizationParams.organization;const authorizationParams=urlOptions.authorizationParams||{};authorizationParams.access_id=options.accessId;authorizationParams.redirect_uri=authorizationParams.redirect_uri||window.location.origin;if(options.enabledAuthProviders)authorizationParams.enabled_providers=options.enabledAuthProviders;const _c=await this._prepareAuthorizeUrl(authorizationParams),{url:url}=_c,transaction=__rest(_c,[\"url\"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},transaction),{appState:appState}),organization&&{organization:organization}));const urlWithFragment=fragment?`${url}#${fragment}`:url;if(openUrl){await openUrl(urlWithFragment)}else{window.location.assign(urlWithFragment)}}async handleRedirectCallback(url=window.location.href){const queryStringFragments=url.split(\"?\").slice(1);if(queryStringFragments.length===0){throw new Error(\"There are no query params available for parsing.\")}const{state:state,code:code,error:error,error_description:error_description}=parseAuthenticationResult(queryStringFragments.join(\"\"));const transaction=this.transactionManager.get();if(!transaction){throw new GenericError(\"missing_transaction\",\"Invalid state\")}this.transactionManager.remove();if(error){throw new AuthenticationError(error,error_description||error,state,transaction.appState)}if(!transaction.code_verifier||transaction.state&&transaction.state!==state){throw new GenericError(\"state_mismatch\",\"Invalid state\")}const organization=transaction.organization;const nonceIn=transaction.nonce;const redirect_uri=transaction.redirect_uri;await this._requestToken(Object.assign({audience:transaction.audience,scope:transaction.scope,code_verifier:transaction.code_verifier,grant_type:\"authorization_code\",code:code},redirect_uri?{redirect_uri:redirect_uri}:{}),{nonceIn:nonceIn,organization:organization});return{appState:transaction.appState}}async checkSession(options){if(!this.cookieStorage.get(this.isConnectedCookieName)){if(!this.cookieStorage.get(OLD_IS_AUTHENTICATED_COOKIE_NAME)){return}else{this.cookieStorage.save(this.isConnectedCookieName,true,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain});this.cookieStorage.remove(OLD_IS_AUTHENTICATED_COOKIE_NAME)}}try{await this.getTokenSilently(options)}catch(_){}}async getTokenSilently(options={}){var _a;const localOptions=Object.assign(Object.assign({cacheMode:\"on\"},options),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),options.authorizationParams),{scope:getUniqueScopes(this.scope,(_a=options.authorizationParams)===null||_a===void 0?void 0:_a.scope)})});const result=await singlePromise((()=>this._getTokenSilently(localOptions)),`${this.options.clientId}::${localOptions.authorizationParams.audience}::${localOptions.authorizationParams.scope}`);return options.detailedResponse?result:result===null||result===void 0?void 0:result.access_token}async _getTokenSilently(options){const{cacheMode:cacheMode}=options,getTokenOptions=__rest(options,[\"cacheMode\"]);if(cacheMode!==\"off\"){const entry=await this._getEntryFromCache({scope:getTokenOptions.authorizationParams.scope,audience:getTokenOptions.authorizationParams.audience||\"default\",clientId:this.options.clientId});if(entry){return entry}}if(cacheMode===\"cache-only\"){return}if(await retryPromise((()=>lock.acquireLock(GET_TOKEN_SILENTLY_LOCK_KEY,5e3)),10)){try{window.addEventListener(\"pagehide\",this._releaseLockOnPageHide);if(cacheMode!==\"off\"){const entry=await this._getEntryFromCache({scope:getTokenOptions.authorizationParams.scope,audience:getTokenOptions.authorizationParams.audience||\"default\",clientId:this.options.clientId});if(entry){return entry}}const authResult=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(getTokenOptions):await this._getTokenFromIFrame(getTokenOptions);const{id_token:id_token,access_token:access_token,oauthTokenScope:oauthTokenScope,expires_in:expires_in}=authResult;return Object.assign(Object.assign({id_token:id_token,access_token:access_token},oauthTokenScope?{scope:oauthTokenScope}:null),{expires_in:expires_in})}finally{await lock.releaseLock(GET_TOKEN_SILENTLY_LOCK_KEY);window.removeEventListener(\"pagehide\",this._releaseLockOnPageHide)}}else{throw new TimeoutError}}async getTokenWithPopup(options,config={}){var _a;const localOptions=Object.assign(Object.assign({},options),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),options.authorizationParams),{scope:getUniqueScopes(this.scope,(_a=options.authorizationParams)===null||_a===void 0?void 0:_a.scope)})});config=Object.assign(Object.assign({},DEFAULT_POPUP_CONFIG_OPTIONS),config);await this.connectWithPopup(localOptions,config);const cache=await this.cacheManager.get(new CacheKey({scope:localOptions.authorizationParams.scope,audience:localOptions.authorizationParams.audience||\"default\",clientId:this.options.clientId}));return cache.access_token}async isConnected(){const user=await this.getUser();return!!user}_buildLogoutUrl(options){if(options.clientId!==null){options.clientId=options.clientId||this.options.clientId}else{delete options.clientId}const _a=options.logoutParams||{},{federated:federated}=_a,logoutOptions=__rest(_a,[\"federated\"]);const federatedQuery=federated?`&federated`:\"\";const url=this._url(`/logout?${createQueryParams(Object.assign({clientId:options.clientId},logoutOptions))}`);return url+federatedQuery}async logout(options={}){const _a=patchOpenUrlWithOnRedirect(options),logoutOptions=__rest(_a,[\"openUrl\"]);if(options.clientId===null){await this.cacheManager.clear()}else{await this.cacheManager.clear(options.clientId||this.options.clientId)}this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain});this.cookieStorage.remove(this.isConnectedCookieName,{cookieDomain:this.options.cookieDomain});this.userCache.remove(CACHE_KEY_ID_TOKEN_SUFFIX);this._buildLogoutUrl(logoutOptions)}async _getTokenFromIFrame(options){const params=Object.assign(Object.assign({},options.authorizationParams),{prompt:\"none\"});const orgHint=this.cookieStorage.get(this.orgHintCookieName);if(orgHint&&!params.organization){params.organization=orgHint}const{url:url,state:stateIn,nonce:nonceIn,code_verifier:code_verifier,redirect_uri:redirect_uri,scope:scope,audience:audience}=await this._prepareAuthorizeUrl(params,{response_mode:\"web_message\"},window.location.origin);try{if(window.crossOriginIsolated){throw new GenericError(\"login_required\",\"The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.\")}const authorizeTimeout=options.timeoutInSeconds||this.options.authorizeTimeoutInSeconds;const codeResult=await runIframe(url,this.domainUrl,authorizeTimeout);if(stateIn!==codeResult.state){throw new GenericError(\"state_mismatch\",\"Invalid state\")}const tokenResult=await this._requestToken(Object.assign(Object.assign({},options.authorizationParams),{code_verifier:code_verifier,code:codeResult.code,grant_type:\"authorization_code\",redirect_uri:redirect_uri,timeout:options.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:nonceIn,organization:params.organization});return Object.assign(Object.assign({},tokenResult),{scope:scope,oauthTokenScope:tokenResult.scope,audience:audience})}catch(e){if(e.error===\"login_required\"){this.logout({openUrl:false})}throw e}}async _getTokenUsingRefreshToken(options){const cache=await this.cacheManager.get(new CacheKey({scope:options.authorizationParams.scope,audience:options.authorizationParams.audience||\"default\",clientId:this.options.clientId}));if((!cache||!cache.refresh_token)&&!this.worker){if(this.options.useRefreshTokensFallback){return await this._getTokenFromIFrame(options)}throw new MissingRefreshTokenError(options.authorizationParams.audience||\"default\",options.authorizationParams.scope)}const redirect_uri=options.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin;const timeout=typeof options.timeoutInSeconds===\"number\"?options.timeoutInSeconds*1e3:null;try{const tokenResult=await this._requestToken(Object.assign(Object.assign(Object.assign({},options.authorizationParams),{grant_type:\"refresh_token\",refresh_token:cache&&cache.refresh_token,redirect_uri:redirect_uri}),timeout&&{timeout:timeout}));return Object.assign(Object.assign({},tokenResult),{scope:options.authorizationParams.scope,oauthTokenScope:tokenResult.scope,audience:options.authorizationParams.audience||\"default\"})}catch(e){if((e.message.indexOf(MISSING_REFRESH_TOKEN_ERROR_MESSAGE)>-1||e.message&&e.message.indexOf(INVALID_REFRESH_TOKEN_ERROR_MESSAGE)>-1)&&this.options.useRefreshTokensFallback){return await this._getTokenFromIFrame(options)}throw e}}async _saveEntryInCache(entry){const{id_token:id_token,decodedToken:decodedToken}=entry,entryWithoutIdToken=__rest(entry,[\"id_token\",\"decodedToken\"]);this.userCache.set(CACHE_KEY_ID_TOKEN_SUFFIX,{id_token:id_token,decodedToken:decodedToken});await this.cacheManager.setIdToken(this.options.clientId,entry.id_token,entry.decodedToken);await this.cacheManager.set(entryWithoutIdToken)}async _getIdTokenFromCache(){const audience=this.options.authorizationParams.audience||\"default\";const cache=await this.cacheManager.getIdToken(new CacheKey({clientId:this.options.clientId,audience:audience,scope:this.scope}));const currentCache=this.userCache.get(CACHE_KEY_ID_TOKEN_SUFFIX);if(cache&&cache.id_token===(currentCache===null||currentCache===void 0?void 0:currentCache.id_token)){return currentCache}this.userCache.set(CACHE_KEY_ID_TOKEN_SUFFIX,cache);return cache}async _getEntryFromCache({scope:scope,audience:audience,clientId:clientId}){const entry=await this.cacheManager.get(new CacheKey({scope:scope,audience:audience,clientId:clientId}),60);if(entry&&entry.access_token){const{access_token:access_token,oauthTokenScope:oauthTokenScope,expires_in:expires_in}=entry;const cache=await this._getIdTokenFromCache();return cache&&Object.assign(Object.assign({id_token:cache.id_token,access_token:access_token},oauthTokenScope?{scope:oauthTokenScope}:null),{expires_in:expires_in})}}async _requestToken(options,additionalParameters){const{nonceIn:nonceIn,organization:organization}=additionalParameters||{};const authResult=await oauthToken(Object.assign({baseUrl:this.authDomainUrl,client_id:this.options.clientId,earthoOneClient:this.options.earthoOneClient,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},options),this.worker);const decodedToken=await this._verifyIdToken(authResult.id_token,nonceIn,organization);await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},authResult),{decodedToken:decodedToken,scope:options.scope,audience:options.audience||\"default\"}),authResult.scope?{oauthTokenScope:authResult.scope}:null),{client_id:this.options.clientId}));this.cookieStorage.save(this.isConnectedCookieName,true,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain});this._processOrgHint(organization||decodedToken.claims.org_id);return Object.assign(Object.assign({},authResult),{decodedToken:decodedToken})}}class User{}async function createEarthoOne(options){const eartho=new EarthoOne(options);try{await eartho.checkSession()}catch(e){}try{await eartho.handleRedirectCallback()}catch(e){}return eartho}export{AuthenticationError,CacheKey,EarthoOne,GenericError,InMemoryCache,LocalStorageCache,MfaRequiredError,MissingRefreshTokenError,PopupCancelledError,PopupTimeoutError,TimeoutError,User,createEarthoOne};\n//# sourceMappingURL=one-client-js.production.esm.js.map\n","import { User } from '@eartho/one-client-js';\n\n/**\n * The auth state which, when combined with the auth methods, make up the return object of the `useEarthoOne` hook.\n */\nexport interface AuthState<TUser extends User = User> {\n  error?: Error;\n  isConnected: boolean;\n  isLoading: boolean;\n  user?: TUser;\n}\n\n/**\n * The initial auth state.\n */\nexport const initialAuthState: AuthState = {\n  isConnected: false,\n  isLoading: true,\n};\n","import {\n  LogoutOptions as SPALogoutOptions,\n  PopupConnectOptions,\n  PopupConfigOptions,\n  RedirectConnectResult,\n  User,\n  RedirectConnectOptions as SPARedirectConnectOptions,\n} from '@eartho/one-client-js';\nimport { createContext } from 'react';\nimport { AuthState, initialAuthState } from './auth-state';\nimport { AppState } from './eartho-provider';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface LogoutOptions extends Omit<SPALogoutOptions, 'onRedirect'> {}\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface RedirectConnectOptions<TAppState = AppState>\n  extends Omit<SPARedirectConnectOptions<TAppState>, 'onRedirect'> {}\n\n/**\n * Contains the authenticated state and authentication methods provided by the `useEarthoOne` hook.\n */\nexport interface EarthoOneContextInterface<TUser extends User = User>\n  extends AuthState<TUser> {\n  \n     /**\n   * ```js\n   * const claims = await getUser();\n   * ```\n   *\n   * Returns all claims from the id_token if available.\n   */\n  getUser: (\n  ) => Promise<User | undefined>;\n\n\n  /**\n   * ```js\n   * const claims = await getIdToken();\n   * ```\n   *\n   * Returns all claims from the id_token if available.\n   */\n  getIdToken: () => Promise<string | undefined>;\n\n  /**\n   * ```js\n   * await connectWithRedirect(options);\n   * ```\n   *\n   * Performs a redirect to `/authorize` using the parameters\n   * provided as arguments. Random and secure `state` and `nonce`\n   * parameters will be auto-generated.\n   */\n  connectWithRedirect: (options: RedirectConnectOptions<AppState>) => Promise<void>;\n\n  /**\n   * ```js\n   * await connectWithPopup(options, config);\n   * ```\n   *\n   * Opens a popup with the `/authorize` URL using the parameters\n   * provided as arguments. Random and secure `state` and `nonce`\n   * parameters will be auto-generated. If the response is successful,\n   * results will be valid according to their expiration times.\n   *\n   * IMPORTANT: This method has to be called from an event handler\n   * that was started by the user like a button click, for example,\n   * otherwise the popup will be blocked in most browsers.\n   */\n  connectWithPopup: (\n    options: PopupConnectOptions,\n    config?: PopupConfigOptions\n  ) => Promise<void>;\n\n  /**\n   * ```js\n   * eartho.logout({ logoutParams: { returnTo: window.location.origin } });\n   * ```\n   *\n   * Clears the application session and performs a redirect to `/v2/logout`, using\n   * the parameters provided as arguments, to clear the Eartho session.\n   * If the `logoutParams.federated` option is specified, it also clears the Identity Provider session.\n   * [Read more about how Logout works at Eartho]\n   */\n  logout: (options?: LogoutOptions) => Promise<void>;\n\n  /**\n   * After the browser redirects back to the callback page,\n   * call `handleRedirectCallback` to handle success and error\n   * responses from Eartho. If the response is successful, results\n   * will be valid according to their expiration times.\n   *\n   * @param url The URL to that should be used to retrieve the `state` and `code` values. Defaults to `window.location.href` if not given.\n   */\n  handleRedirectCallback: (url?: string) => Promise<RedirectConnectResult>;\n}\n\n/**\n * @ignore\n */\nconst stub = (): never => {\n  throw new Error('You forgot to wrap your component in <EarthoOneProvider>.');\n};\n\n/**\n * @ignore\n */\nexport const initialContext = {\n  ...initialAuthState,\n  buildAuthorizeUrl: stub,\n  buildLogoutUrl: stub,\n  getUser: stub,\n  getIdToken: stub,\n  connectWithRedirect: stub,\n  connectWithPopup: stub,\n  logout: stub,\n  handleRedirectCallback: stub,\n};\n\n/**\n * The Eartho Context\n */\nconst EarthoOneContext = createContext<EarthoOneContextInterface>(initialContext);\n\nexport default EarthoOneContext;\n","/**\n * An OAuth2 error will come from the authorization server and will have at least an `error` property which will\n * be the error code. And possibly an `error_description` property\n *\n * See: https://openid.net/specs/openid-connect-core-1_0.html#rfc.section.3.1.2.6\n */\nexport class OAuthError extends Error {\n  constructor(public error: string, public error_description?: string) {\n    super(error_description || error);\n\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, OAuthError.prototype);\n  }\n}\n","import { OAuthError } from './errors';\n\nconst CODE_RE = /[?&]code=[^&]+/;\nconst STATE_RE = /[?&]state=[^&]+/;\nconst ERROR_RE = /[?&]error=[^&]+/;\n\nexport const hasAuthParams = (searchParams = window.location.search): boolean =>\n  (CODE_RE.test(searchParams) || ERROR_RE.test(searchParams)) &&\n  STATE_RE.test(searchParams);\n\nconst normalizeErrorFn =\n  (fallbackMessage: string) =>\n  (error: unknown): Error => {\n    if (error instanceof Error) {\n      return error;\n    }\n    // try to check errors of the following form: {error: string; error_description?: string}\n    if (\n      error !== null &&\n      typeof error === 'object' &&\n      'error' in error &&\n      typeof error.error === 'string'\n    ) {\n      if (\n        'error_description' in error &&\n        typeof error.error_description === 'string'\n      ) {\n        return new OAuthError(error.error, error.error_description);\n      }\n      return new OAuthError(error.error);\n    }\n    return new Error(fallbackMessage);\n  };\n\nexport const loginError = normalizeErrorFn('Login failed');\n\nexport const tokenError = normalizeErrorFn('Get access token failed');\n\n/**\n * @ignore\n * Helper function to map the v1 `redirectUri` option to the v2 `authorizationParams.redirect_uri`\n * and log a warning.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const deprecateRedirectUri = (options?: any) => {\n  if (options?.redirectUri) {\n    console.warn(\n      'Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version'\n    );\n    options.authorizationParams = options.authorizationParams || {};\n    options.authorizationParams.redirect_uri = options.redirectUri;\n    delete options.redirectUri;\n  }\n\n  if (options?.authorizationParams?.redirectUri) {\n    console.warn(\n      'Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version'\n    );\n    options.authorizationParams.redirect_uri =\n      options.authorizationParams.redirectUri;\n    delete options.authorizationParams.redirectUri;\n  }\n};\n","import { User } from '@eartho/one-client-js';\nimport { AuthState } from './auth-state';\n\ntype Action =\n  | { type: 'LOGIN_POPUP_STARTED' }\n  | {\n      type:\n        | 'INITIALISED'\n        | 'LOGIN_POPUP_COMPLETE'\n        | 'GET_ACCESS_TOKEN_COMPLETE'\n        | 'HANDLE_REDIRECT_COMPLETE';\n      user?: User;\n    }\n  | { type: 'LOGOUT' }\n  | { type: 'ERROR'; error: Error };\n\n/**\n * Handles how that state changes in the `useEarthoOne` hook.\n */\nexport const reducer = (state: AuthState, action: Action): AuthState => {\n  switch (action.type) {\n    case 'LOGIN_POPUP_STARTED':\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case 'LOGIN_POPUP_COMPLETE':\n    case 'INITIALISED':\n      return {\n        ...state,\n        isConnected: !!action.user,\n        user: action.user,\n        isLoading: false,\n        error: undefined,\n      };\n    case 'HANDLE_REDIRECT_COMPLETE':\n    case 'GET_ACCESS_TOKEN_COMPLETE':\n      if (state.user === action.user) {\n        return state;\n      }\n      return {\n        ...state,\n        isConnected: !!action.user,\n        user: action.user,\n      };\n    case 'LOGOUT':\n      return {\n        ...state,\n        isConnected: false,\n        user: undefined,\n      };\n    case 'ERROR':\n      return {\n        ...state,\n        isLoading: false,\n        error: action.error,\n      };\n  }\n};\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  EarthoOne,\n  EarthoOneOptions,\n  PopupConnectOptions,\n  PopupConfigOptions,\n  RedirectConnectResult,\n  User,\n} from '@eartho/one-client-js';\nimport EarthoOneContext, {\n  EarthoOneContextInterface,\n  LogoutOptions,\n  RedirectConnectOptions,\n} from './eartho-context';\nimport {\n  hasAuthParams,\n  loginError,\n  tokenError,\n  deprecateRedirectUri,\n} from './utils';\nimport { reducer } from './reducer';\nimport { initialAuthState } from './auth-state';\n\n/**\n * The state of the application before the user was redirected to the login page.\n */\nexport type AppState = {\n  returnTo?: string;\n  [key: string]: any; // eslint-disable-line @typescript-eslint/no-explicit-any\n};\n\n/**\n * The main configuration to instantiate the `EarthoOneProvider`.\n */\nexport interface EarthoOneProviderOptions extends EarthoOneOptions {\n  /**\n   * The child nodes your Provider has wrapped\n   */\n  children?: React.ReactNode;\n  /**\n   * By default this removes the code and state parameters from the url when you are redirected from the authorize page.\n   * It uses `window.history` but you might want to overwrite this if you are using a custom router, like `react-router-dom`\n   * See the EXAMPLES.md for more info.\n   */\n  onRedirectCallback?: (appState?: AppState, user?: User) => void;\n  /**\n   * By default, if the page url has code/state params, the SDK will treat them as Eartho's and attempt to exchange the\n   * code for a token. In some cases the code might be for something else (another OAuth SDK perhaps). In these\n   * instances you can instruct the client to ignore them eg\n   *\n   * ```jsx\n   * <EarthoOneProvider\n   *   clientId={clientId}\n   *   domain={domain}\n   *   skipRedirectCallback={window.location.pathname === '/stripe-oauth-callback'}\n   * >\n   * ```\n   */\n  skipRedirectCallback?: boolean;\n  /**\n   * Context to be used when creating the EarthoOneProvider, defaults to the internally created context.\n   *\n   * This allows multiple EarthoOneProviders to be nested within the same application, the context value can then be\n   * passed to useEarthoOne, withEarthoOne, or withAuthenticationRequired to use that specific EarthoOneProvider to access\n   * auth state and methods specifically tied to the provider that the context belongs to.\n   *\n   * When using multiple EarthoOneProviders in a single application you should do the following to ensure sessions are not\n   * overwritten:\n   *\n   * * Configure a different redirect_uri for each EarthoOneProvider, and set skipRedirectCallback for each provider to ignore\n   * the others redirect_uri\n   * * If using localstorage for both EarthoOneProviders, ensure that the audience and scope are different for so that the key\n   * used to store data is different\n   *\n   */\n  context?: React.Context<EarthoOneContextInterface>;\n}\n\n/**\n * Replaced by the package version at build time.\n * @ignore\n */\ndeclare const __VERSION__: string;\n\n/**\n * @ignore\n */\nconst toEarthoOneOptions = (\n  opts: EarthoOneProviderOptions\n): EarthoOneOptions => {\n  deprecateRedirectUri(opts);\n\n  return {\n    ...opts,\n    earthoOneClient: {\n      name: 'one-client-react',\n      version: __VERSION__,\n    },\n  };\n};\n\n/**\n * @ignore\n */\nconst defaultOnRedirectCallback = (appState?: AppState): void => {\n  window.history.replaceState(\n    {},\n    document.title,\n    appState?.returnTo || window.location.pathname\n  );\n};\n\n/**\n * ```jsx\n * <EarthoOneProvider\n *   domain={domain}\n *   clientId={clientId}\n *   authorizationParams={{ redirect_uri: window.location.origin }}>\n *   <MyApp />\n * </EarthoOneProvider>\n * ```\n *\n * Provides the EarthoOneContext to its child components.\n */\nconst EarthoOneProvider = (opts: EarthoOneProviderOptions): JSX.Element => {\n  const {\n    children,\n    skipRedirectCallback,\n    onRedirectCallback = defaultOnRedirectCallback,\n    context = EarthoOneContext,\n    ...clientOpts\n  } = opts;\n  const [client] = useState(\n    () => new EarthoOne(toEarthoOneOptions(clientOpts))\n  );\n  const [state, dispatch] = useReducer(reducer, initialAuthState);\n  const didInitialise = useRef(false);\n\n  useEffect(() => {\n    if (didInitialise.current) {\n      return;\n    }\n    didInitialise.current = true;\n    (async (): Promise<void> => {\n      try {\n        let user: User | undefined;\n        if (hasAuthParams() && !skipRedirectCallback) {\n          const { appState } = await client.handleRedirectCallback();\n          user = await client.getUser();\n          onRedirectCallback(appState, user);\n        } else {\n          await client.checkSession();\n          user = await client.getUser();\n        }\n        dispatch({ type: 'INITIALISED', user });\n      } catch (error) {\n        dispatch({ type: 'ERROR', error: loginError(error) });\n      }\n    })();\n  }, [client, onRedirectCallback, skipRedirectCallback]);\n\n  const connectWithRedirect = useCallback(\n    (opts: RedirectConnectOptions): Promise<void> => {\n      deprecateRedirectUri(opts);\n\n      return client.connectWithRedirect(opts);\n    },\n    [client]\n  );\n\n  const connectWithPopup = useCallback(\n    async (\n      options: PopupConnectOptions,\n      config?: PopupConfigOptions\n    ): Promise<void> => {\n      dispatch({ type: 'LOGIN_POPUP_STARTED' });\n      try {\n        await client.connectWithPopup(options, config);\n      } catch (error) {\n        dispatch({ type: 'ERROR', error: loginError(error) });\n        return;\n      }\n      const user = await client.getUser();\n      dispatch({ type: 'LOGIN_POPUP_COMPLETE', user });\n    },\n    [client]\n  );\n\n  const logout = useCallback(\n    async (opts: LogoutOptions = {}): Promise<void> => {\n      await client.logout(opts);\n      dispatch({ type: 'LOGOUT' });\n  \n    },\n    [client]\n  );\n\n  const getUser = useCallback(\n    () => client.getUser(),\n    [client]\n  );\n  \n  const getIdToken = useCallback(\n    () => client.getIdToken(),\n    [client]\n  );\n\n  const handleRedirectCallback = useCallback(\n    async (url?: string): Promise<RedirectConnectResult> => {\n      try {\n        return await client.handleRedirectCallback(url);\n      } catch (error) {\n        throw tokenError(error);\n      } finally {\n        dispatch({\n          type: 'HANDLE_REDIRECT_COMPLETE',\n          user: await client.getUser(),\n        });\n      }\n    },\n    [client]\n  );\n  \n  const contextValue = useMemo<EarthoOneContextInterface<User>>(() => {\n    return {\n      ...state,\n      getUser,\n      getIdToken,\n      connectWithRedirect,\n      connectWithPopup,\n      logout,\n      handleRedirectCallback,\n    };\n  }, [\n    state,\n    getUser,\n    getIdToken,\n    connectWithRedirect,\n    connectWithPopup,\n    logout,\n    handleRedirectCallback,\n  ]);\n\n  return <context.Provider value={contextValue}>{children}</context.Provider>;\n};\n\nexport default EarthoOneProvider;\n","import { useContext } from 'react';\nimport { User } from '@eartho/one-client-js';\nimport EarthoOneContext, { EarthoOneContextInterface } from './eartho-context';\n\n/**\n * ```js\n * const {\n *   // Auth state:\n *   error,\n *   isConnected,\n *   isLoading,\n *   user,\n *   // Auth methods:\n *   getAccessTokenSilently,\n *   getAccessTokenWithPopup,\n *   getIdToken,\n *   connectWithRedirect,\n *   connectWithPopup,\n *   logout,\n * } = useEarthoOne<TUser>();\n * ```\n *\n * Use the `useEarthoOne` hook in your components to access the auth state and methods.\n *\n * TUser is an optional type param to provide a type to the `user` field.\n */\nconst useEarthoOne = <TUser extends User = User>(\n  context = EarthoOneContext\n): EarthoOneContextInterface<TUser> =>\n  useContext(context) as EarthoOneContextInterface<TUser>;\n\nexport default useEarthoOne;\n","import React, { ComponentType, useEffect, FC } from 'react';\nimport useEarthoOne from './use-eartho';\nimport EarthoOneContext, {\n  EarthoOneContextInterface,\n  RedirectConnectOptions,\n} from './eartho-context';\n\n/**\n * @ignore\n */\nconst defaultOnRedirecting = (): JSX.Element => <></>;\n\n/**\n* @ignore\n*/\nconst defaultOnBeforeAuthentication = async (): Promise<void> => {/* noop */};\n\n/**\n * @ignore\n */\nconst defaultReturnTo = (): string =>\n  `${window.location.pathname}${window.location.search}`;\n\n/**\n * Options for the withAuthenticationRequired Higher Order Component\n */\nexport interface WithAuthenticationRequiredOptions {\n  /**\n   * ```js\n   * withAuthenticationRequired(Profile, {\n   *   returnTo: '/profile'\n   * })\n   * ```\n   *\n   * or\n   *\n   * ```js\n   * withAuthenticationRequired(Profile, {\n   *   returnTo: () => window.location.hash.substr(1)\n   * })\n   * ```\n   *\n   * Add a path for the `onRedirectCallback` handler to return the user to after login.\n   */\n  returnTo?: string | (() => string);\n  /**\n   * ```js\n   * withAuthenticationRequired(Profile, {\n   *   onRedirecting: () => <div>Redirecting you to the login...</div>\n   * })\n   * ```\n   *\n   * Render a message to show that the user is being redirected to the login.\n   */\n  onRedirecting?: () => JSX.Element;\n  /**\n   * ```js\n   * withAuthenticationRequired(Profile, {\n   *   onBeforeAuthentication: () => { analyticsLibrary.track('login_triggered'); }\n   * })\n   * ```\n   *\n   * Allows executing logic before the user is redirected to the login page.\n   */\n  onBeforeAuthentication?: () => Promise<void>;\n  /**\n   * ```js\n   * withAuthenticationRequired(Profile, {\n   *   loginOptions: {\n   *     appState: {\n   *       customProp: 'foo'\n   *     }\n   *   }\n   * })\n   * ```\n   *\n   * Pass additional login options, like extra `appState` to the login page.\n   * This will be merged with the `returnTo` option used by the `onRedirectCallback` handler.\n   */\n  loginOptions: RedirectConnectOptions;\n  /**\n   * The context to be used when calling useEarthoOne, this should only be provided if you are using multiple EarthoOneProviders\n   * within your application and you wish to tie a specific component to a EarthoOneProvider other than the EarthoOneProvider\n   * associated with the default EarthoOneContext.\n   */\n  context?: React.Context<EarthoOneContextInterface>;\n}\n\n/**\n * ```js\n * const MyProtectedComponent = withAuthenticationRequired(MyComponent);\n * ```\n *\n * When you wrap your components in this Higher Order Component and an anonymous user visits your component\n * they will be redirected to the login page; after login they will be returned to the page they were redirected from.\n */\nconst withAuthenticationRequired = <P extends object>(\n  Component: ComponentType<P>,\n  options: WithAuthenticationRequiredOptions\n): FC<P> => {\n  return function WithAuthenticationRequired(props: P): JSX.Element {\n    const {\n      returnTo = defaultReturnTo,\n      onRedirecting = defaultOnRedirecting,\n      onBeforeAuthentication = defaultOnBeforeAuthentication,\n      loginOptions,\n      context = EarthoOneContext,\n    } = options;\n\n    const { isConnected, isLoading, connectWithRedirect } =\n      useEarthoOne(context);\n\n    useEffect(() => {\n      if (isLoading || isConnected) {\n        return;\n      }\n      const opts = {\n        ...loginOptions,\n        appState: {\n          ...(loginOptions && loginOptions.appState),\n          returnTo: typeof returnTo === 'function' ? returnTo() : returnTo,\n        },\n      };\n      (async (): Promise<void> => {\n        await onBeforeAuthentication();\n        await connectWithRedirect(opts);\n      })();\n    }, [\n      isLoading,\n      isConnected,\n      connectWithRedirect,\n      onBeforeAuthentication,\n      loginOptions,\n      returnTo,\n    ]);\n\n    return isConnected ? <Component {...props} /> : onRedirecting();\n  };\n};\n\nexport default withAuthenticationRequired;\n","import React, { ComponentType } from 'react';\nimport EarthoOneContext, { EarthoOneContextInterface } from './eartho-context';\n\n/**\n * Components wrapped in `withEarthoOne` will have an additional `eartho` prop\n */\nexport interface WithEarthoOneProps {\n  eartho: EarthoOneContextInterface;\n}\n\n/**\n * ```jsx\n * class MyComponent extends Component {\n *   render() {\n *     // Access the auth context from the `eartho` prop\n *     const { user } = this.props.eartho;\n *     return <div>Hello {user.name}!</div>\n *   }\n * }\n * // Wrap your class component in withEarthoOne\n * export default withEarthoOne(MyComponent);\n * ```\n *\n * Wrap your class components in this Higher Order Component to give them access to the EarthoOneContext.\n *\n * Providing a context as the second argument allows you to configure the EarthoOneProvider the EarthoOneContext\n * should come from f you have multiple within your application.\n */\nconst withEarthoOne = <P extends WithEarthoOneProps>(\n  Component: ComponentType<P>,\n  context = EarthoOneContext\n): ComponentType<Omit<P, keyof WithEarthoOneProps>> => {\n  return function WithAuth(props): JSX.Element {\n    return (\n      <context.Consumer>\n        {(auth: EarthoOneContextInterface): JSX.Element => (\n          <Component {...(props as P)} eartho={auth} />\n        )}\n      </context.Consumer>\n    );\n  };\n};\n\nexport default withEarthoOne;\n"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","SuppressedError","commonjsGlobal","globalThis","window","global","self","unwrapExports","x","__esModule","createCommonjsModule","fn","module","exports","processLock","defineProperty","value","ProcessLocking","_this","this","locked","Map","addToLocked","key","toAdd","callbacks","get","undefined","set","unshift","isLocked","has","lock","Promise","resolve","reject","unlock","toCall","pop","setTimeout","delete","getInstance","instance","default","browserTabsLock","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","done","then","apply","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","TypeError","push","LOCK_STORAGE_KEY","DEFAULT_STORAGE_HANDLER","index","_a","Error","getItem","clear","localStorage","removeItem","setItem","keySync","getItemSync","clearSync","removeItemSync","setItemSync","delay","milliseconds","generateRandomString","CHARS","randomstring","Math","floor","random","SuperTokensLock","storageHandler","acquiredIatSet","Set","id","Date","now","toString","acquireLock","bind","releaseLock","releaseLock__private__","waitForSomethingToChange","refreshLockWhileAcquired","waiters","lockKey","timeout","iat","MAX_TIME","STORAGE_KEY","STORAGE","TIMEOUT_KEY","lockObjPostDelay","parsedLockObjPostDelay","JSON","stringify","timeoutKey","timeAcquired","timeRefreshed","parse","add","lockCorrector","storageKey","lockObj","parsedLockObj","resolvedCalled","startedAt","removedListeners","stopWaiting","removeEventListener","removeFromWaiting","clearTimeout","timeOutId","timeToWait","addEventListener","addToWaiting","max","func","filter","notifyWaiters","slice","forEach","parsedlockObj","MIN_ALLOWED_TIME","KEYS","currIndex","LOCK_KEY","includes","Lock","DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS","DEFAULT_POPUP_CONFIG_OPTIONS","timeoutInSeconds","DEFAULT_SILENT_TOKEN_RETRY_COUNT","CACHE_LOCATION_MEMORY","DEFAULT_EARTHO_CLIENT","name","version","DEFAULT_NOW_PROVIDER","GenericError","constructor","error","error_description","super","setPrototypeOf","fromPayload","AuthenticationError","state","appState","TimeoutError","PopupTimeoutError","popup","PopupCancelledError","MfaRequiredError","mfa_token","MissingRefreshTokenError","audience","scope","valueOrEmptyString","exclude","getCrypto","crypto","createRandomString","charset","Array","from","getRandomValues","Uint8Array","encode","btoa","createQueryParams","clientId","client_id","params","URLSearchParams","keys","k","reduce","acc","assign","stripUndefined","urlDecodeB64","input","decodeURIComponent","atob","split","map","c","charCodeAt","join","decodeB64","replace","getDomain","domainUrl","test","dofetch","async","fetchUrl","fetchOptions","response","fetch","ok","json","fetchWithoutWorker","controller","AbortController","timeoutId","signal","race","abort","finally","fetchWithWorker","worker","useFormData","sendMessage","message","auth","to","messageChannel","MessageChannel","port1","onmessage","event","data","close","postMessage","port2","switchFetch","oauthToken","baseUrl","earthoOneClient","options","url","fetchError","errorMessage","getJSON","method","headers","getUniqueScopes","scopes","dedupe","arr","Boolean","trim","CACHE_KEY_PREFIX","CACHE_KEY_ID_TOKEN_SUFFIX","CacheKey","prefix","suffix","toKey","fromKey","fromCacheEntry","entry","LocalStorageCache","remove","allKeys","startsWith","InMemoryCache","enclosedCache","cache","cacheEntry","CacheManager","keyManifest","nowProvider","setIdToken","idToken","decodedToken","cacheKey","getIdTokenCacheKey","id_token","getIdToken","entryByScope","expiryAdjustmentSeconds","wrappedEntry","getCacheKeys","matchedKey","matchExistingCacheKey","nowSeconds","expiresAt","refresh_token","wrapCacheEntry","memo","expires_in","keyToMatch","scopeSet","scopesToMatch","hasAllScopes","current","TransactionManager","storage","cookieDomain","create","transaction","save","daysUntilExpire","isNumber","idTokendecoded","verify","decoded","token","parts","header","payload","signature","payloadJSON","claims","__raw","user","encoded","decode","iss","alg","aud","isArray","azp","nonce","max_age","auth_time","exp","leeway","expDate","setUTCSeconds","nbf","nbfDate","authTimeDate","parseInt","organization","org","orgId","org_id","orgName","toLowerCase","org_name","esCookie","__assign","arguments","stringifyAttribute","stringified","attributes","encodeURIComponent","expires","setMilliseconds","getMilliseconds","toUTCString","domain","path","secure","sameSite","stringifyAttributes","cookieString","cookies","rdecode","cookie","charAt","getAll","document","esCookie_4","esCookie_5","esCookie_6","CookieStorage","cookieAttributes","location","protocol","LEGACY_PREFIX","CookieStorageWithLegacySameSite","SessionStorage","sessionStorage","createURL","base64","sourcemapArg","enableUnicodeArg","sourcemap","source","enableUnicode","binaryString","binaryView","String","fromCharCode","Uint16Array","buffer","decodeBase64","start","substring","blob","Blob","type","URL","createObjectURL","WorkerFactory","Worker","singlePromiseMap","CacheKeyManifest","manifestKey","createManifestKeyFrom","size","GET_TOKEN_SILENTLY_LOCK_KEY","OLD_IS_AUTHENTICATED_COOKIE_NAME","cacheLocationBuilders","memory","localstorage","cacheFactory","patchOpenUrlWithOnRedirect","openUrl","onRedirect","originalOptions","EarthoOne","userCache","defaultOptions","authorizationParams","useRefreshTokensFallback","_releaseLockOnPageHide","cacheLocation","issuer","useRefreshTokens","authDomainUrl","subtle","validateCrypto","console","warn","httpTimeoutMs","httpTimeoutInSeconds","cookieStorage","legacySameSiteCookie","orgHintCookieName","isConnectedCookieName","buildisConnectedCookieName","sessionCheckExpiryDays","transactionStorage","useCookiesForTransactions","transactionManager","cacheManager","tokenIssuer","workerUrl","_url","_authorizeUrl","authorizeOptions","_verifyIdToken","_processOrgHint","_prepareAuthorizeUrl","fallbackRedirectUri","code_verifier","code_challenge","ie11SafeInput","b64Chars","m","urlEncodeB64","bufferToBase64UrlEncoded","digestOp","digest","TextEncoder","sha256","clientOptions","redirect_uri","response_mode","access_id","response_type","code_challenge_method","getAuthorizeParams","connectWithPopup","config","left","screenX","innerWidth","top","screenY","innerHeight","open","openPopup","accessId","enabledAuthProviders","enabled_providers","origin","href","codeResult","popupEventListener","popupTimer","setInterval","closed","clearInterval","runPopup","authorizeTimeoutInSeconds","_requestToken","grant_type","code","nonceIn","getUser","_getIdTokenFromCache","connectWithRedirect","_b","fragment","urlOptions","_c","urlWithFragment","handleRedirectCallback","queryStringFragments","queryString","searchParams","parseAuthenticationResult","checkSession","getTokenSilently","localOptions","cacheMode","cb","promise","singlePromise","_getTokenSilently","detailedResponse","access_token","getTokenOptions","_getEntryFromCache","maxNumberOfRetries","retryPromise","authResult","_getTokenUsingRefreshToken","_getTokenFromIFrame","oauthTokenScope","getTokenWithPopup","isConnected","_buildLogoutUrl","logoutParams","federated","logoutOptions","federatedQuery","logout","prompt","orgHint","stateIn","crossOriginIsolated","authorizeTimeout","authorizeUrl","eventOrigin","res","rej","iframe","createElement","setAttribute","style","display","removeIframe","contains","removeChild","iframeEventHandler","timeoutSetTimeoutId","eventSource","CLEANUP_IFRAME_TIMEOUT_IN_SECONDS","appendChild","runIframe","tokenResult","_saveEntryInCache","entryWithoutIdToken","currentCache","additionalParameters","initialAuthState","isLoading","stub","initialContext","buildAuthorizeUrl","buildLogoutUrl","EarthoOneContext","createContext","OAuthError","_super","__extends","CODE_RE","STATE_RE","ERROR_RE","normalizeErrorFn","fallbackMessage","loginError","tokenError","deprecateRedirectUri","redirectUri","reducer","action","defaultOnRedirectCallback","history","replaceState","title","returnTo","pathname","useEarthoOne","context","useContext","defaultOnRedirecting","React","Fragment","defaultOnBeforeAuthentication","defaultReturnTo","concat","search","opts","children","skipRedirectCallback","onRedirectCallback","clientOpts","client","useState","toEarthoOneOptions","useReducer","dispatch","didInitialise","useRef","useEffect","error_1","useCallback","error_2","error_3","contextValue","useMemo","Provider","Component","props","onRedirecting","onBeforeAuthentication","loginOptions","_d","_e","Consumer","eartho"],"mappings":"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","x_google_ignoreList":[0]}